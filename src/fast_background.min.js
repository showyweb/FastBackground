/**
 * @overview FastBackground https://github.com/showyweb/FastBackground
 * @version 7.2.1
 * @author  Novojilov Pavel Andreevich (The founder of the library)
 * @license MIT license. http://www.opensource.org/licenses/mit-license.php
 * @copyright (c) 2017 Pavel Novojilov
 */
!function(){if(-1===window.location.host.indexOf("yandex.net")){var T={resize_event:!0,ajax_url:window.location.href,max_ajax_post_stream:3,ajax_is_work:0,update_is_worked:!1,stage_loaded:-1,timeout_size:50,cssobj:null,is_debug_pws:!1,use_local_storage:!0,clear_urls_pattern:"",prepare_selector_hook:function(e){return e},update:function(t,M,I){if(null===W&&function(){W={isMobile:{Android:!!navigator.userAgent.match(/Android/i),BlackBerry:!!navigator.userAgent.match(/BlackBerry|BB/i),iOS:!!navigator.userAgent.match(/iPhone|iPad|iPod/i),Windows:!!navigator.userAgent.match(/IEMobile/i)},isLocalStorageSupported:!1,isSessionStorageSupported:!1};try{W.isLocalStorageSupported="undefined"!=typeof localStorage,W.isSessionStorageSupported="undefined"!=typeof sessionStorage}catch(e){console.log(e.message)}if(W.isSessionStorageSupported)try{sessionStorage.setItem("test_sessionStorage",1),sessionStorage.removeItem("test_sessionStorage")}catch(e){W.isLocalStorageSupported=!1,W.isSessionStorageSupported=!1}W.isMobile.any=W.isMobile.Android||W.isMobile.BlackBerry||W.isMobile.iOS||W.opera_mini||W.isMobile.Windows,W.isMobile.anyPhone=!!W.isMobile.any&&(!!navigator.userAgent.match(/iphone|ipod/i)||W.isMobile.Android&&!!navigator.userAgent.match(/mobile/i)||W.isMobile.BlackBerry&&!navigator.userAgent.match(/tablet/i)||W.isMobile.Windows),W.isRetinaDisplay=(e=1<window.devicePixelRatio,e),W.isWebpSupport=function(){var e="object"==typeof document?document.createElement("canvas"):{};e.width=e.height=1;var t=!!e.toDataURL&&5===e.toDataURL("image/webp").indexOf("image/webp");if(t)return t;var a=new Image,o=function(e){W.isWebpSupport=!(!e||"load"!==e.type)&&1===a.width};return a.onerror=o,a.onload=o,a.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==",-1}();var e}(),(T.update_is_worked||-1!==T.stage_loaded&&!k||-1===W.isWebpSupport)&&!y)return t&&j.push(t),clearTimeout(m),void(m=setTimeout(arguments.callee.bind(this,null,M),T.timeout_size));switch(y=S=!1,T.update_is_worked=!0,T.stage_loaded){case-1:case 3:T.stage_loaded=0}T.is_debug_pws&&console.warn("fb.stage_loaded "+T.stage_loaded),A=0,T.is_debug_pws&&console.log("pws set "+A),w=!1,null===T.cssobj&&(T.cssobj=cssobj({})),F=null,F=function(){if(T.ajax_is_work--,T.is_debug_pws&&console.log("ajax_is_work "+T.ajax_is_work),T.ajax_is_work<1)if(T.stage_loaded<2)T.stage_loaded<1?(T.cssobj.update(),T.stage_loaded=1,O||(k=!(J=!1))):T.stage_loaded=2,y=!0,T.update(t,M,I);else{T.stage_loaded=3,t&&t();for(var e=0;e<j.length;e++)j[e]();j=[],T.update_is_worked=!1}};var B,e,a=[],o=E(".fast_background:not(.fb_loaded)").toArray(),r=[];for(e=0;e<o.length;e++)r.push(E(o[e]));for(o=r,r=null,e=0;e<o.length;e++){var s=V(B=o[e]);if(a.push(B),(!B.data("is_fb_observed")||B.attr("data-url")&&!B.data("fb_sel"))&&(B.data("is_fb_observed",!0),B.data("fb_sel",s),O&&O.observe(B[0])),!B.is_fb_class&&x.all_exist(B)){var i=x.get_all(B);for(var n in i)if(i.hasOwnProperty(n)){var l=i[n];s=V(B,n);var d=E(s.replace(":hover","").replace(":active","").replace(":focus",""));if(0<d.length){for(var _=0;_<1;_++){var c=d.eq(_);c.data("is_fb_observed")||c.data("is_fb_observed",!0),O&&O.observe(c[0]);var u=null;c.data("fb_sels")?u=c.data("fb_sels"):(u={},c.data("fb_sels",u)),u[s]=!0}var g=d.eq(0)}a.push({is_fb_class:!0,first_elem:g,url:l,fb_selector:s})}}}if(T.ajax_is_work+=a.length,T.ajax_is_work<1)return T.update_is_worked=!1,T.stage_loaded=-1,void(t&&t());var f,b,D=[];for(e=0;e<a.length;e++)!function(t){var a=null,o=null,r=null,e=!1,s=null;if(t.is_fb_class){if(e=!0,s=B.first_elem,r=t.url,a=t.fb_selector,o=a?a.replace(/ |>|\*|\(|\)|\+|\@/gi,"_"):"",!(t=t.first_elem))return F()}else r=t.attr("data-url"),a=null;if(X(r)){T.clear_urls_pattern&&(r=r.replace(T.clear_urls_pattern,""));var i=r.split(":");r=i[0],i[1]||(i[1]=null);var n=q[i[1]]?q[i[1]]:0;0===n&&(n=q.webp),n!==q.webp||W.isWebpSupport||(n=0);var l=t.is("img")?L.img_src:L.b_url;if(l===L.b_url){var d=a;if(d||(d=V(t)),void 0===T.cssobj.obj[d]||void 0===T.cssobj.obj[d][l])T.cssobj.obj[d]={},-1!==r.indexOf(" !important")&&P.push(d);r=r.replace(" !important","")}l!==L.img_src||t.attr("src")||t.attr("src",Q);var _,c,u,g=null;_=t.width(),c=t.height(),t.data("fb_img_type",n),u=Y(t,r+":"+n,_,c),T.is_debug_pws&&console.log("cached_key: "+u);var f=/\.(jpe?g|png|webp)$/i.test(r);if(f||U.set(u,r),!I||!f){g=U.get(u);var b=!1;if(T.stage_loaded<1&&(!g||!f)&&J&&W.isWebpSupport){var p=r+":"+n;if((T.fast_cache[p]||!f)&&(f&&(g=T.fast_cache[p]),b=!0,G(t,a))){var v=K(t,a,!0);X(v)?t.hasClass("fb_ev_img_load")&&t.trigger("fb_ev_img_load",[v]):$(g,t,a,!0,!0)}}if(g)return T.stage_loaded<1&&!b?G(t,a)?X(K(t,a,!0))?H(r,g,t,a,o,u,!0):$(g,t,a,!0,!1,!0):F():H(r,g,t,a,o,u,!0)}0===t.length&&(t=E(a.replace(/(\:| ).*$/gi,"")));var h=!1,w=l===L.img_src?"cover":t.css("background-size");e&&0===s.length&&(w="contain"),"cover"===w&&(h=!0);var m=null;if("cover"!==w&&"contain"!==w){var A=/^(|(\d*)(px|%|auto)) (|(\d*)(px|%|auto))$/i,j=w.match(A);null==j&&(A=/^(|(\d*)(px|%|auto))$/i,j=w.match(A));var y=!1,S=!1;null!=j&&(m=t,j[3]&&"auto"!==j[3].toLowerCase()?(_=parseInt(j[2]),"%"===j[3].toLowerCase()&&(100<=_&&(h=!0),_=m.width()/100*_,_+=10)):y=!0,7===j.length&&j[6]&&"auto"!==j[6].toLowerCase()?(c=parseInt(j[5]),"%"===j[6].toLowerCase()&&(100<=c&&(h=!0),c=m.height()/100*c,c+=10)):(7===j.length||y)&&(S=!0)),y&&S?(_=E(window).width(),c=E(window).height()):(y||S)&&(h=!0)}else if(l===L.img_src&&-1!==[_,c].indexOf(1))for(m=t.parent();1===_&&(_=m.width()),1===c&&(c=m.height()),1===_||1===c;)m=m.parent();h=h?1:0;var x=1<=T.stage_loaded?2<=T.stage_loaded?0:1:2;if(W.isRetinaDisplay&&(_*=2,c*=2),!I){var k="tmp_width"+(e?"_c_"+o:""),O="tmp_height"+(e?"_c_"+o:""),R=parseInt(t.data(k));R||(R=0);var C=parseInt(t.data(O));if(C||(C=0),_<=R&&c<=C&&!t.hasClass("fb_dynamic_url")&&X(g=(g=K(t,a)).replace(" !important","")))return H(r,g,t,a,o,u,!0);1<=T.stage_loaded&&(R<_?t.data(k,_):_=R,C<c?t.data(O,c):c=C)}if(_||c){var z=_+"x"+c;e&&0===s.length&&(t=s),T.stage_loaded<2?D.push({img_obj:t,fb_selector:a,fb_tmp_attr_p:o,cached_key:u,web_url:r,cover_size:h,cont_size:z,def_size:x,end_type:n}):N({fast_background:"get_cached_url",web_url:r,cover_size:h,cont_size:z,def_size:x,end_type:n},function(e){H(r,e,t,a,o,u)},M)}else F()}else F()}(B=a[e].is_fb_class?a[e]:E(a[e]));if(J&&T.cssobj.update(),T.stage_loaded<2&&D.length){for(var p={web_url:"",cover_size:"",cont_size:"",def_size:"",end_type:""},v=0;v<D.length;v++)for(var h in p)p.hasOwnProperty(h)&&(f=v,p[b=h]+=D[f][b]+":");p.fast_background="get_cached_urls",N(p,function(e){if(e){e=e.split(":");for(var t=0;t<D.length;t++)H(D[t].url,e[t],D[t].img_obj,D[t].fb_selector,D[t].fb_tmp_attr_p,D[t].cached_key)}else for(t=0;t<D.length;t++)F()},function(){for(var e=0;e<D.length;e++)!function(t,a,e,o,r,s,i,n,l){N({fast_background:"get_cached_url",web_url:a,cover_size:e,cont_size:o,def_size:r,end_type:s},function(e){H(a,e,t,i,n,l)},M)}(D[e].img_obj,D[e].web_url,D[e].cover_size,D[e].cont_size,D[e].def_size,D[e].end_f_type,D[e].fb_selector,D[e].fb_tmp_attr_p,D[e].cached_key)},1e3)}}},E=jQuery;T=E.extend(fast_background,T);var W=null,w=!1,m=null,A=0,i=0,j=[],L={b_url:"background-image",img_src:"src"},P=[],Q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",J=!0,o=E(window).height(),U={data:{},get:function(e){return!this.data[e]&&W.isLocalStorageSupported&&(this.data[e]=localStorage.getItem(e)),this.data[e]},set:function(e,t){this.data[e]=t,W.isLocalStorageSupported&&T.use_local_storage&&localStorage.setItem(e,t)},del:function(e){this.data[e]&&(delete this.data[e],W.isLocalStorageSupported&&localStorage.removeItem(e))}},y=!1,q={jpg:2,png:3,webp:18},S=!0;E(function(){E(window).on("beforeunload.fast_background",function(e){w=!0});var t=E(window).width();E(window).resize(function(){if(!T.resize_event)return!0;var e=E(window).width();T.stage_loaded<2||W.isMobile.any&&t===e||-1===window.location.host.indexOf("yandex.net")&&(E(".fb_loaded").removeClass("fb_loaded"),t=E(window).width(),T.update())}),E(document).on("scroll mousemove touchstart",function(e){J&&0<T.stage_loaded&&(J=!1,T.is_debug_pws&&console.warn("load_only_visible set false"),fast_background.update())});var a=null,o=1,r=null;function s(e,t){clearTimeout(a),a=setTimeout(function(){S||fast_background.update()},o),o<2e3&&(o+=500),clearTimeout(r),r=setTimeout(function(){o=1},3e3)}var i,n,l,d,e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserve;e?new e(s).observe(document.body,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["class","style"],characterData:!1}):(d=l=n=i=0,setInterval(function(){if(document.scrollingElement&&document.scrollingElement.scrollWidth!==d)return d=document.scrollingElement.scrollWidth,s(),!0;var e=E(".fast-background").length;if(e!==i)return i=e,s(),!0;var t=0,a=0;return E(".fast-background").each(function(){var e=E(this);"none"!==e.css("display")&&t++,"hidden"!==e.css("overflow")&&a++}),t!==n||a!==l?(n=t,l=a,s(),!0):void 0},2e3))});var _=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)},F=null,n=[],l=null,x={get_all:function(e){var t=e.attr("data-urls");return void 0===t?{}:(t=t.replace(/'/gi,'"'),t=E.parseJSON(t))},get:function(e,t){return this.get_all(e)[t]},set_all:function(e,t){var a=E.toJSON(t);a=a.replace(/\"/gi,"'"),e.attr("data-urls",a),isEmptyObject(t)&&this.del_all(e)},set:function(e,t,a){var o=this.get_all(e);o[t]=a,this.set_all(e,o)},del_all:function(e){e.removeAttr("data-urls")},del:function(e,t){var a=this.get_all(e);delete a[t],this.set_all(e,a)},all_exist:function(e){return void 0!==e.attr("data-urls")}},r={},k=!1,O="IntersectionObserver"in window?new IntersectionObserver(function(e){if(J)setTimeout(arguments.callee.bind(this,e),300);else for(var t in k=!0,e){var a=e[t];if(a.isIntersecting){var o=E(a.target),r=o.data("fb_sel"),s=null;r&&g(r)&&(s=o.attr("data-url"))&&X(s)&&f(o,s);var i=o.data("fb_sels");if(i)for(r in i)if(g(r)){var n=r.split(/(?=[: ])/g),l=n[0];n[0]="";var d=n.join("");" "===d.substring(0,1)&&(d=d.substring(1));var _=o.closest(l);X(s=x.get(_,d))&&f(o,s,r)}}}},{rootMargin:"0px 1000px "+(o+o/2)+"px 1000px"}):null}function c(e){return!/(\/(m_)?def_)/.test(e)}function N(o,r,s,e){if(A>=T.max_ajax_post_stream||i)setTimeout(arguments.callee.bind(this,o,r,s,e),100);else{A++,T.is_debug_pws&&(console.log("ajax begin"),console.log("pws "+A));var t=o,a={url:T.ajax_url.replace(window.location.hash,""),method:"post",data:t,complete:function(e){var t=e.responseText;if(200===e.status){if(A--,T.is_debug_pws&&(console.log("ajax end"),console.log("pws "+A)),w)return;var a="<->ajax_complete<->";if(t.substring(t.length-a.length)!==a)return s?s(t):console.error("ERROR POST AJAX: "+t),void r(null);t=t.substring(0,t.length-a.length),r&&r(t)}else{if(A--,T.is_debug_pws&&(console.error("ajax fail"),console.log("pws "+A)),w)return;s?s("ERROR POST AJAX: <div style='white-space: pre-wrap; word-wrap:break-word;'>"+window.location.href+" "+(E.toJSON?E.toJSON(o):"")+"</div><br>ERROR TEXT: "+e.statusText):console.error("ERROR POST AJAX: "+e.statusText),r(null)}}};e&&(a.timeout=e),E.ajax(a)}}function u(t,e,a,o){if(!o){if(!t)return void(a&&a(t));n.push([t,e,a])}if(n.length){var r=n[0];t=r[0],e=r[1],a=r[2],n.splice(0,1),n.length||(clearInterval(l),l=null),i++,T.is_debug_pws&&(console.warn("load_img "+t),console.log("ilws "+i));var s=new Image;s.onload=function(){i--,T.is_debug_pws&&(console.log("loaded_img "+t),console.log("ilws "+i)),e&&e(t)},s.onerror=function(e){return i--,T.is_debug_pws&&(console.log("img on error "+t),console.log("ilws "+i)),e.preventDefault(),e.stopPropagation(),a&&a(),!1},s.src=t,n.length&&arguments.callee.apply(this,null,null,null,!0)}}function V(e,t){var a=e.attr("id");(a&&(a="#"+a),a||(a=e.is("body")?"fb_body":"fb_"+Math.random().toString(36).substring(2,11),e.attr("id",a),a="#"+a),t)&&(a=a+(0===t.indexOf(":")?"":" ")+t);return a=T.prepare_selector_hook(a)}function X(e){return/\.(jpe?g|png|webp|gif|svg)($|:| !|\?)/i.test(e)}function $(e,a,t,o,r,s){if(T.is_debug_pws&&console.log("set_f-"+e),X(e)){c(e)&&(a.hasClass("fb_loaded")&&(a.removeClass("fb_loaded"),a.addClass("fb_dynamic_url")),a.hasClass("fb_dynamic_url")||r||s||a.addClass("fb_loaded"),a.data("fb_last_load_url",e));var i=a&&a.is("img")?L.img_src:L.b_url;try{switch(i){case L.b_url:var n=t;n?E(n).css(i,""):(a[0].style[i]="",n=V(a)),void 0===T.cssobj.obj[n]&&(T.cssobj.obj[n]={});var l=!l&&-1!==P.indexOf(n),d="url("+e+")"+(l?" !important":"");T.cssobj.obj[n][i]&&T.cssobj.obj[n][i]!==d&&(!0,T.cssobj.obj[n][i]="none",T.cssobj.obj[n].backgroundImage="none",o||T.cssobj.update()),T.cssobj.obj[n][i]=d,T.cssobj.obj[n].backgroundImage=d,o||T.cssobj.update();break;case L.img_src:a.attr(i)!==e&&a.attr(i,e),_(function(){var e=E(window).width(),t=a.width();(500<e&&e<t||W.isMobile.anyPhone&&t<10)&&a.css("width","100%")},a[0])}/*!ajax_work_not_minus &&*/a.hasClass("fb_ev_img_load")&&(T.is_debug_pws&&console.warn("trigger fb_ev_img_load",e),a.trigger("fb_ev_img_load",[e]))}catch(e){console.warn(e.message)}}r||F()}function K(e,t,a){var o=e.is("img")?L.img_src:L.b_url;switch(o){case L.b_url:var r="";if(a)r=e.css(o);else{var s=t;if(s||(s=V(e)),void 0===T.cssobj.obj[s])return"";r=T.cssobj.obj[s][o]}return r?r.replace(/url\(['"]?|['"]?\)/g,""):"";case L.img_src:var i=e.attr(o);return void 0===i&&(i=""),i}}function Y(e,t,a,o){a||(a=e.width()),o||(o=e.height());a-=a%10,o-=o%10;var r="";try{var s=new Date;r=s.getDate()+s.getMonth()+s.getFullYear()}catch(e){}return"fast_background_cached_url_"+a+"x"+o+"_"+t+"_"+r}function G(e,t){if(J){var a=e[0].getBoundingClientRect();return a.top<o&&(a.top||a.height)||e.hasClass("fb_ignore_io")}return!O||r[t||V(e)]||e.hasClass("fb_ignore_io")}function H(e,t,a,o,r,s,i,n){function l(){U.del(s),a.removeClass("fb_loaded"),a.data("fb_before_error",!0),F()}if(t){if(c(t))t&&!i&&U.set(s,t);else{var d="tmp_width"+(o?"_c_"+r:""),_="tmp_height"+(o?"_c_"+r:"");a.removeData(d),a.removeData(_)}G(a,o)?(a.hasClass("fb_ev_img_cache_url")&&a.trigger("fb_ev_img_cache_url",[t]),a.data("fb_before_error")&&(t+="?is_retry=1"),u(t,function(){$(t,a,o,!1,n)},l)):n||F()}else l()}function g(e){return!r[e]&&(r[e]=!0)}function f(e,t,a){(t=t.replace(" !important",""))&&T.clear_urls_pattern&&(t=t.replace(T.clear_urls_pattern,"")),t=t.split(":")[0],t+=":"+e.data("fb_img_type");var o=Y(e,t),r=U.get(o);!r||e.hasClass("fb_loaded")&&e.data("fb_last_load_url")===r?O&&O.unobserve(e[0]):(T.ajax_is_work++,e.data("fb_before_error")&&(r+="?is_retry=1"),u(r,function(){O&&O.unobserve(e[0]),$(r,e,a)},function(){e.removeClass("fb_loaded"),e.data("fb_before_error",!0),U.del(o),F()}))}}();