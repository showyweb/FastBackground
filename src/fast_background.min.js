/**
 * @overview FastBackground https://github.com/showyweb/FastBackground
 * @version 7.2.5
 * @author  Novojilov Pavel Andreevich (The founder of the library)
 * @license MIT license. http://www.opensource.org/licenses/mit-license.php
 * @copyright (c) 2017 Pavel Novojilov
 */
!function(){if(-1===window.location.host.indexOf("yandex.net")){var T={resize_event:!0,ajax_url:window.location.href,max_ajax_post_stream:3,ajax_is_work:0,update_is_worked:!1,stage_loaded:-1,timeout_size:50,cssobj:null,is_debug_pws:!1,use_local_storage:!0,clear_urls_pattern:"",prepare_selector_hook:function(e){return e},update:function(t,B,I){if(null===L&&function(){L={isMobile:{Android:!!navigator.userAgent.match(/Android/i),BlackBerry:!!navigator.userAgent.match(/BlackBerry|BB/i),iOS:!!navigator.userAgent.match(/iPhone|iPad|iPod/i),Windows:!!navigator.userAgent.match(/IEMobile/i)},isLocalStorageSupported:!1,isSessionStorageSupported:!1};try{L.isLocalStorageSupported="undefined"!=typeof localStorage,L.isSessionStorageSupported="undefined"!=typeof sessionStorage}catch(e){console.log(e.message)}if(L.isSessionStorageSupported)try{sessionStorage.setItem("test_sessionStorage",1),sessionStorage.removeItem("test_sessionStorage")}catch(e){L.isLocalStorageSupported=!1,L.isSessionStorageSupported=!1}L.isMobile.any=L.isMobile.Android||L.isMobile.BlackBerry||L.isMobile.iOS||L.opera_mini||L.isMobile.Windows,L.isMobile.anyPhone=!!L.isMobile.any&&(!!navigator.userAgent.match(/iphone|ipod/i)||L.isMobile.Android&&!!navigator.userAgent.match(/mobile/i)||L.isMobile.BlackBerry&&!navigator.userAgent.match(/tablet/i)||L.isMobile.Windows),L.isRetinaDisplay=(e=1<window.devicePixelRatio,e),L.isWebpSupport=function(){var e="object"==typeof document?document.createElement("canvas"):{};e.width=e.height=1;var t=!!e.toDataURL&&5===e.toDataURL("image/webp").indexOf("image/webp");if(t)return t;var a=new Image,o=function(e){L.isWebpSupport=!(!e||"load"!==e.type)&&1===a.width};return a.onerror=o,a.onload=o,a.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==",-1}();var e}(),(T.update_is_worked||-1!==T.stage_loaded&&!k||-1===L.isWebpSupport)&&!S)return t&&j.push(t),clearTimeout(m),void(m=setTimeout(arguments.callee.bind(this,null,B),T.timeout_size));switch(S=y=!1,T.update_is_worked=!0,T.stage_loaded){case-1:case 3:T.stage_loaded=0}T.is_debug_pws&&console.warn("fb.stage_loaded "+T.stage_loaded),A=0,T.is_debug_pws&&console.log("pws set "+A),w=!1,null===T.cssobj&&(T.cssobj=cssobj({})),N=null,N=function(){if(T.ajax_is_work--,T.is_debug_pws&&console.log("ajax_is_work "+T.ajax_is_work),T.ajax_is_work<1)switch(T.stage_loaded){case 0:T.cssobj.update(),T.stage_loaded=1,O||(k=!(U=!1)),S=!0,T.update(t,B,I);break;case 1:T.stage_loaded=2,S=!0,T.update(t,B,I);break;case 2:T.stage_loaded=3,t&&t();for(var e=0;e<j.length;e++)j[e]();j=[],T.update_is_worked=!1,U&&(U=!1,T.update())}};var D,e,a=[],o=W(".fast_background:not(.fb_loaded)").toArray(),r=[];for(e=0;e<o.length;e++)r.push(W(o[e]));for(o=r,r=null,e=0;e<o.length;e++){var s=X(D=o[e]);if(a.push(D),(!D.data("is_fb_observed")||D.attr("data-url")&&!D.data("fb_sel"))&&(D.data("is_fb_observed",!0),D.data("fb_sel",s),O&&O.observe(D[0])),!D.is_fb_class&&x.all_exist(D)){var i=x.get_all(D);for(var n in i)if(i.hasOwnProperty(n)){var l=i[n];s=X(D,n);var d=W(s.replace(":hover","").replace(":active","").replace(":focus",""));if(0<d.length){for(var _=0;_<1;_++){var c=d.eq(_);c.data("is_fb_observed")||c.data("is_fb_observed",!0),O&&O.observe(c[0]);var u=null;c.data("fb_sels")?u=c.data("fb_sels"):(u={},c.data("fb_sels",u)),u[s]=!0}var g=d.eq(0)}a.push({is_fb_class:!0,first_elem:g,url:l,fb_selector:s})}}}if(T.ajax_is_work+=a.length,T.ajax_is_work<1)return T.update_is_worked=!1,T.stage_loaded=-1,void(t&&t());var f,b,E=[];for(e=0;e<a.length;e++)!function(t){var a=null,o=null,r=null,e=!1,s=null;if(t.is_fb_class){if(e=!0,s=D.first_elem,r=t.url,a=t.fb_selector,o=a?a.replace(/ |>|\*|\(|\)|\+|\@/gi,"_"):"",!(t=t.first_elem))return N()}else r=t.attr("data-url"),a=null;if($(r)){T.clear_urls_pattern&&(r=r.replace(T.clear_urls_pattern,""));var i=r.split(":");r=i[0],i[1]||(i[1]=null);var n=F[i[1]]?F[i[1]]:0;0===n&&(n=F.webp),n!==F.webp||L.isWebpSupport||(n=0);var l=t.is("img")?P.img_src:P.b_url;if(l===P.b_url){var d=a;if(d||(d=X(t)),void 0===T.cssobj.obj[d]||void 0===T.cssobj.obj[d][l])T.cssobj.obj[d]={},-1!==r.indexOf(" !important")&&Q.push(d);r=r.replace(" !important","")}l!==P.img_src||t.attr("src")||t.attr("src",J);var _,c,u,g,f=null;_=(g=t[0].getBoundingClientRect()).width,c=g.height,t.data("fb_img_type",n),u=G(t,r+":"+n,_,c),T.is_debug_pws&&console.log("cached_key: "+u);var b=/\.(jpe?g|png|webp)$/i.test(r);if(b||q.set(u,r),!I||!b){f=q.get(u);var p=!1;if(T.stage_loaded<1&&(!f||!b)&&U&&L.isWebpSupport){var v=r+":"+n;if((T.fast_cache[v]||!b)&&(b&&(f=T.fast_cache[v]),p=!0,H(t,a))){var h=Y(t,a,!0);$(h)?t.hasClass("fb_ev_img_load")&&t.trigger("fb_ev_img_load",[h]):K(f,t,a,!0,!0)}}if(f)return T.stage_loaded<1&&!p?H(t,a)?$(Y(t,a,!0))?Z(r,f,t,a,o,u,!0):K(f,t,a,!0,!1,!0):N():Z(r,f,t,a,o,u,!0)}0===t.length&&(t=W(a.replace(/(\:| ).*$/gi,"")));var w=!1,m=l===P.img_src?"cover":t.css("background-size");e&&0===s.length&&(m="contain"),"cover"===m&&(w=!0);var A=null;if("cover"!==m&&"contain"!==m){var j=/^(|(\d*)(px|%|auto)) (|(\d*)(px|%|auto))$/i,S=m.match(j);null==S&&(j=/^(|(\d*)(px|%|auto))$/i,S=m.match(j));var y=!1,x=!1;null!=S&&(A=t,S[3]&&"auto"!==S[3].toLowerCase()?(_=parseInt(S[2]),"%"===S[3].toLowerCase()&&(100<=_&&(w=!0),_=A.width()/100*_,_+=10)):y=!0,7===S.length&&S[6]&&"auto"!==S[6].toLowerCase()?(c=parseInt(S[5]),"%"===S[6].toLowerCase()&&(100<=c&&(w=!0),c=A.height()/100*c,c+=10)):(7===S.length||y)&&(x=!0)),y&&x?(_=W(window).width(),c=W(window).height()):(y||x)&&(w=!0)}else if(l===P.img_src&&-1!==[_,c].indexOf(1))for(A=t.parent();1===_&&(_=A.width()),1===c&&(c=A.height()),1===_||1===c;)A=A.parent();w=w?1:0;var k={0:2,1:1,2:0}[T.stage_loaded];if(L.isRetinaDisplay&&(_*=2,c*=2),!I){var O="tmp_width"+(e?"_c_"+o:""),R="tmp_height"+(e?"_c_"+o:""),C=parseInt(t.data(O));C||(C=0);var z=parseInt(t.data(R));if(z||(z=0),_<=C&&c<=z&&!t.hasClass("fb_dynamic_url")&&$(f=(f=Y(t,a)).replace(" !important","")))return Z(r,f,t,a,o,u,!0);1<=T.stage_loaded&&(C<_?t.data(O,_):_=C,z<c?t.data(R,c):c=z)}if(_||c){var M=_+"x"+c;e&&0===s.length&&(t=s),T.stage_loaded<2?E.push({img_obj:t,fb_selector:a,fb_tmp_attr_p:o,cached_key:u,web_url:r,cover_size:w,cont_size:M,def_size:k,end_type:n}):V({fast_background:"get_cached_url",web_url:r,cover_size:w,cont_size:M,def_size:k,end_type:n},function(e){Z(r,e,t,a,o,u)},B)}else N()}else N()}(D=a[e].is_fb_class?a[e]:W(a[e]));if(U&&T.cssobj.update(),T.stage_loaded<2&&E.length){for(var p={web_url:"",cover_size:"",cont_size:"",def_size:"",end_type:""},v=0;v<E.length;v++)for(var h in p)p.hasOwnProperty(h)&&(f=v,p[b=h]+=E[f][b]+":");p.fast_background="get_cached_urls",V(p,function(e){if(e){e=e.split(":");for(var t=0;t<E.length;t++)Z(E[t].url,e[t],E[t].img_obj,E[t].fb_selector,E[t].fb_tmp_attr_p,E[t].cached_key)}else for(t=0;t<E.length;t++)N()},function(){for(var e=0;e<E.length;e++)!function(t,a,e,o,r,s,i,n,l){V({fast_background:"get_cached_url",web_url:a,cover_size:e,cont_size:o,def_size:r,end_type:s},function(e){Z(a,e,t,i,n,l)},B)}(E[e].img_obj,E[e].web_url,E[e].cover_size,E[e].cont_size,E[e].def_size,E[e].end_f_type,E[e].fb_selector,E[e].fb_tmp_attr_p,E[e].cached_key)},1e3)}}},W=jQuery;T=W.extend(fast_background,T);var L=null,w=!1,m=null,A=0,i=0,j=[],P={b_url:"background-image",img_src:"src"},Q=[],J="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",U=!0,o=W(window).height(),q={data:{},get:function(e){return!this.data[e]&&L.isLocalStorageSupported&&(this.data[e]=localStorage.getItem(e)),this.data[e]},set:function(e,t){if(this.data[e]=t,L.isLocalStorageSupported&&T.use_local_storage)try{localStorage.setItem(e,t)}catch(e){localStorage.clear()}},del:function(e){this.data[e]&&(delete this.data[e],L.isLocalStorageSupported&&localStorage.removeItem(e))}},S=!1,F={jpg:2,png:3,webp:18},y=!0;W(function(){W(window).on("beforeunload.fast_background",function(e){w=!0});var t=W(window).width();W(window).resize(function(){if(!T.resize_event)return!0;var e=W(window).width();T.stage_loaded<2||L.isMobile.any&&t===e||-1===window.location.host.indexOf("yandex.net")&&(W(".fb_loaded").removeClass("fb_loaded"),t=W(window).width(),T.update())}),W(document).on("scroll mousemove touchstart",function(e){U&&0<T.stage_loaded&&(U=!1,T.is_debug_pws&&console.warn("load_only_visible set false"),fast_background.update())});var a=null;function o(e,t){clearTimeout(a),a=setTimeout(function(){y||fast_background.update()},100)}var r,s,i,n,e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserve;e?new e(o).observe(document.body,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["class","style"],characterData:!1}):(n=i=s=r=0,setInterval(function(){if(document.scrollingElement&&document.scrollingElement.scrollWidth!==n)return n=document.scrollingElement.scrollWidth,o(),!0;var e=W(".fast-background").length;if(e!==r)return r=e,o(),!0;var t=0,a=0;return W(".fast-background").each(function(){var e=W(this);"none"!==e.css("display")&&t++,"hidden"!==e.css("overflow")&&a++}),t!==s||a!==i?(s=t,i=a,o(),!0):void 0},2e3))});var _=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)},N=null,n=[],l=null,x={get_all:function(e){var t=e.attr("data-urls");return void 0===t?{}:(t=t.replace(/'/gi,'"'),t=W.parseJSON(t))},get:function(e,t){return this.get_all(e)[t]},set_all:function(e,t){var a=W.toJSON(t);a=a.replace(/\"/gi,"'"),e.attr("data-urls",a),isEmptyObject(t)&&this.del_all(e)},set:function(e,t,a){var o=this.get_all(e);o[t]=a,this.set_all(e,o)},del_all:function(e){e.removeAttr("data-urls")},del:function(e,t){var a=this.get_all(e);delete a[t],this.set_all(e,a)},all_exist:function(e){return void 0!==e.attr("data-urls")}},r={},k=!1,O="IntersectionObserver"in window?new IntersectionObserver(function(e){if(U)setTimeout(arguments.callee.bind(this,e),300);else for(var t in k=!0,e){var a=e[t];if(a.isIntersecting){var o=W(a.target),r=o.data("fb_sel"),s=null;r&&f(r)&&(s=o.attr("data-url"))&&$(s)&&b(o,s);var i=o.data("fb_sels");if(i)for(r in i)if(f(r)){var n=r.split(/(?=[: ])/g),l=n[0];n[0]="";var d=n.join("");" "===d.substring(0,1)&&(d=d.substring(1));var _=o.closest(l);$(s=x.get(_,d))&&b(o,s,r)}}}},{rootMargin:"0px 1000px "+(o+o/2)+"px 1000px"}):null}function c(e){return!/(\/(m_)?def_)/.test(e)}function V(o,r,s,e){if(A>=T.max_ajax_post_stream||i)setTimeout(arguments.callee.bind(this,o,r,s,e),100);else{A++,T.is_debug_pws&&(console.log("ajax begin"),console.log("pws "+A));var t=o,a={url:T.ajax_url.replace(window.location.hash,""),method:"post",data:t,complete:function(e){var t=e.responseText;if(200===e.status){if(A--,T.is_debug_pws&&(console.log("ajax end"),console.log("pws "+A)),w)return;var a="<->ajax_complete<->";if(t.substring(t.length-a.length)!==a)return s?s(t):console.error("ERROR POST AJAX: "+t),void r(null);t=t.substring(0,t.length-a.length),r&&r(t)}else{if(A--,T.is_debug_pws&&(console.error("ajax fail"),console.log("pws "+A)),w)return;s?s("ERROR POST AJAX: <div style='white-space: pre-wrap; word-wrap:break-word;'>"+window.location.href+" "+(W.toJSON?W.toJSON(o):"")+"</div><br>ERROR TEXT: "+e.statusText):console.error("ERROR POST AJAX: "+e.statusText),r(null)}}};e&&(a.timeout=e),W.ajax(a)}}function u(t,e,a,o){if(!o){if(!t)return void(a&&a(t));n.push([t,e,a])}if(n.length){var r=n[0];t=r[0],e=r[1],a=r[2],n.splice(0,1),n.length||(clearInterval(l),l=null),i++,T.is_debug_pws&&(console.warn("load_img "+t),console.log("ilws "+i));var s=new Image;s.onload=function(){i--,T.is_debug_pws&&(console.log("loaded_img "+t),console.log("ilws "+i)),e&&e(t)},s.onerror=function(e){return i--,T.is_debug_pws&&(console.log("img on error "+t),console.log("ilws "+i)),e.preventDefault(),e.stopPropagation(),a&&a(),!1},s.src=t,n.length&&arguments.callee.apply(this,null,null,null,!0)}}function g(e,t){e.hasClass("fb_loaded")&&e.removeClass("fb_loaded");var a=e.data("fb_before_error_count");a?(e.data("fb_before_error_count",a+1),3<=a&&e.addClass("fb_loaded")):e.data("fb_before_error_count",1),q.del(t),N()}function X(e,t){var a=e.attr("id");(a&&(a="#"+a),a||(a=e.is("body")?"fb_body":"fb_"+Math.random().toString(36).substring(2,11),e.attr("id",a),a="#"+a),t)&&(a=a+(0===t.indexOf(":")?"":" ")+t);return a=T.prepare_selector_hook(a)}function $(e){return/\.(jpe?g|png|webp|gif|svg)($|:| !|\?)/i.test(e)}function K(e,a,t,o,r,s){if(T.is_debug_pws&&console.log("set_f-"+e),$(e)){c(e)&&(a.hasClass("fb_loaded")&&a.removeClass("fb_loaded"),a.hasClass("fb_dynamic_url")||r||s||a.addClass("fb_loaded"),a.data("fb_last_load_url",e));var i=a&&a.is("img")?P.img_src:P.b_url;try{switch(i){case P.b_url:var n=t;n?W(n).css(i,""):(a[0].style[i]="",n=X(a)),void 0===T.cssobj.obj[n]&&(T.cssobj.obj[n]={});var l=!l&&-1!==Q.indexOf(n),d="url("+e+")"+(l?" !important":"");T.cssobj.obj[n][i]&&T.cssobj.obj[n][i]!==d&&(!0,T.cssobj.obj[n][i]="none",T.cssobj.obj[n].backgroundImage="none",o||T.cssobj.update()),T.cssobj.obj[n][i]=d,T.cssobj.obj[n].backgroundImage=d,o||T.cssobj.update();break;case P.img_src:a.attr(i)!==e&&a.attr(i,e),_(function(){var e=W(window).width(),t=a.width();(500<e&&e<t||L.isMobile.anyPhone&&t<10)&&a.css("width","100%")},a[0])}/*!ajax_work_not_minus &&*/a.hasClass("fb_ev_img_load")&&(T.is_debug_pws&&console.warn("trigger fb_ev_img_load",e),a.trigger("fb_ev_img_load",[e]))}catch(e){console.warn(e.message)}}r||N()}function Y(e,t,a){var o=e.is("img")?P.img_src:P.b_url;switch(o){case P.b_url:var r="";if(a)r=e.css(o);else{var s=t;if(s||(s=X(e)),void 0===T.cssobj.obj[s])return"";r=T.cssobj.obj[s][o]}return r?r.replace(/url\(['"]?|['"]?\)/g,""):"";case P.img_src:var i=e.attr(o);return void 0===i&&(i=""),i}}function G(e,t,a,o){var r={};a&&o||(r=e[0].getBoundingClientRect()),a||(a=r.width),o||(o=r.heigh);a-=a%10,o-=o%10;var s="";try{var i=new Date;s=i.getDate()+i.getMonth()+i.getFullYear()}catch(e){}return"fast_background_cached_url_"+a+"x"+o+"_"+t+"_"+s}function H(e,t){if(U){var a=e[0].getBoundingClientRect();return a.top<o&&(a.top||a.height)||e.hasClass("fb_ignore_io")}return!O||r[t||X(e)]||e.hasClass("fb_ignore_io")}function Z(e,t,a,o,r,s,i,n){if(t){if(c(t))t&&!i&&q.set(s,t);else{var l="tmp_width"+(o?"_c_"+r:""),d="tmp_height"+(o?"_c_"+r:"");a.removeData(l),a.removeData(d)}if(H(a,o)){a.hasClass("fb_ev_img_cache_url")&&a.trigger("fb_ev_img_cache_url",[t]);var _=a.data("fb_before_error_count");_&&(t+="?is_retry="+_),u(t,function(){K(t,a,o,!1,n)},function(){g(a,s)})}else n||N()}else g(a,s)}function f(e){return!r[e]&&(r[e]=!0)}function b(e,t,a){(t=t.replace(" !important",""))&&T.clear_urls_pattern&&(t=t.replace(T.clear_urls_pattern,"")),t=t.split(":")[0],t+=":"+e.data("fb_img_type");var o=G(e,t),r=q.get(o);if(!r||e.hasClass("fb_loaded")&&e.data("fb_last_load_url")===r)O&&(T.update(),O.unobserve(e[0]));else{T.ajax_is_work++;var s=e.data("fb_before_error_count");s&&(r+="?is_retry="+s),u(r,function(){O&&O.unobserve(e[0]),K(r,e,a)},function(){g(e,o)})}}}();