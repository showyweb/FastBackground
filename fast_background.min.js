/**
 * @overview FastBackground https://github.com/showyweb/FastBackground
 * @version 5.3.2
 * @author  Novojilov Pavel Andreevich (The founder of the library)
 * @license MIT license. http://www.opensource.org/licenses/mit-license.php
 * @copyright (c) 2017 Pavel Novojilov
 */
!function(){if(-1===window.location.host.indexOf("yandex.net")){var D={resize_event:!0,ajax_url:window.location.href,max_ajax_post_stream:8,ajax_is_work:0,update_is_worked:!1,stage_loaded:-1,timeout_size:50,cssobj:null,is_debug_pws:!1,use_local_storage:!0,clear_urls_pattern:"",prepare_selector_hook:function(e){return e},update:function(a,C,I){if(null===Q&&function(){Q={isMobile:{Android:!!navigator.userAgent.match(/Android/i),BlackBerry:!!navigator.userAgent.match(/BlackBerry|BB/i),iOS:!!navigator.userAgent.match(/iPhone|iPad|iPod/i),Windows:!!navigator.userAgent.match(/IEMobile/i)},isLocalStorageSupported:!1,isSessionStorageSupported:!1};try{Q.isLocalStorageSupported="undefined"!=typeof localStorage,Q.isSessionStorageSupported="undefined"!=typeof sessionStorage}catch(e){console.log(e.message)}if(Q.isSessionStorageSupported)try{sessionStorage.setItem("test_sessionStorage",1),sessionStorage.removeItem("test_sessionStorage")}catch(e){Q.isLocalStorageSupported=!1,Q.isSessionStorageSupported=!1}Q.isMobile.any=Q.isMobile.Android||Q.isMobile.BlackBerry||Q.isMobile.iOS||Q.opera_mini||Q.isMobile.Windows,Q.isMobile.anyPhone=!!Q.isMobile.any&&(!!navigator.userAgent.match(/iphone|ipod/i)||Q.isMobile.Android&&!!navigator.userAgent.match(/mobile/i)||Q.isMobile.BlackBerry&&!navigator.userAgent.match(/tablet/i)||Q.isMobile.Windows),Q.isRetinaDisplay=function(){E("head").append('<style id="FB_BS" type="text/css"> .FB_BS_is_retina {display: none; opacity: 0; } @media only screen and (-Webkit-min-device-pixel-ratio: 1.5), only screen and (-moz-min-device-pixel-ratio: 1.5), only screen and (-o-min-device-pixel-ratio: 3 / 2), only screen and (min-device-pixel-ratio: 1.5), only screen and (-webkit-min-device-pixel-ratio: 3) {.FB_BS_is_retina {opacity: 1; }} </style>');var e=E("<div id='test_FB_BS' class='FB_BS_is_retina'></div>");E("body").append(e);var a=1==e.css("opacity");return e.remove(),E("#FB_BS").remove(),a}(),Q.isWebpSupport=function(){var e="object"==typeof document?document.createElement("canvas"):{};e.width=e.height=1;var a=!!e.toDataURL&&5===e.toDataURL("image/webp").indexOf("image/webp");if(a)return a;var t=new Image,o=function(e){Q.isWebpSupport=!(!e||"load"!==e.type)&&1===t.width};return t.onerror=o,t.onload=o,t.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==",-1}()}(),(D.update_is_worked||-1!==D.stage_loaded&&!x||-1===Q.isWebpSupport)&&!y)return a&&j.push(a),clearTimeout(m),void(m=setTimeout(arguments.callee.bind(this,null,C),D.timeout_size));switch(y=!1,D.update_is_worked=!0,D.stage_loaded){case-1:D.stage_loaded=0;break;case 3:D.stage_loaded=1}D.is_debug_pws&&console.warn("fb.stage_loaded "+D.stage_loaded),A=0,D.is_debug_pws&&console.log("pws set "+A),w=!1,null===D.cssobj&&(D.cssobj=cssobj({})),U=null,U=function(){if(D.ajax_is_work--,D.is_debug_pws&&console.log("ajax_is_work "+D.ajax_is_work),D.ajax_is_work<1)if(D.stage_loaded<2)D.stage_loaded<1?(D.cssobj.update(),D.stage_loaded=1,k||(x=!(P=!1))):D.stage_loaded=2,y=!0,D.update(a,C,I);else{D.stage_loaded=3,a&&a();for(var e=0;e<j.length;e++)j[e]();j=[],D.update_is_worked=!1}};var M,e,t=[],o=E(".fast_background:not(.fb_loaded)").toArray(),s=[];for(e=0;e<o.length;e++)s.push(E(o[e]));for(o=s,s=null,e=0;e<o.length;e++){var r=N(M=o[e]);if(t.push(M),(!M.data("is_fb_observed")||M.attr("data-url")&&!M.data("fb_sel"))&&(M.data("is_fb_observed",!0),M.data("fb_sel",r),k&&k.observe(M[0])),!M.is_fb_class&&S.all_exist(M)){var i=S.get_all(M);for(var n in i)if(i.hasOwnProperty(n)){var l=i[n];r=N(M,n);var d=E(r.replace(":hover","").replace(":active","").replace(":focus",""));if(0<d.length){for(var _=0;_<1;_++){var c=d.eq(_);c.data("is_fb_observed")||c.data("is_fb_observed",!0),k&&k.observe(c[0]);var u=null;c.data("fb_sels")?u=c.data("fb_sels"):(u={},c.data("fb_sels",u)),u[r]=!0}var g=d.eq(0)}t.push({is_fb_class:!0,first_elem:g,url:l,fb_selector:r})}}}if(D.ajax_is_work=t.length,D.ajax_is_work<1)return D.update_is_worked=!1,D.stage_loaded=-1,void(a&&a());var f,p,z=[];for(e=0;e<t.length;e++)!function(a){var t=null,o=null,s=null,e=!1,r=null;if(a.is_fb_class){if(e=!0,r=M.first_elem,s=a.url,t=a.fb_selector,o=t?t.replace(/ |>|\*|\(|\)|\+|\@/gi,"_"):"",!(a=a.first_elem))return U()}else s=a.attr("data-url"),t=null;if(s){D.clear_urls_pattern&&(s=s.replace(D.clear_urls_pattern,""));var i=s.split(":");s=i[0],i[1]||(i[1]=null);var n=J[i[1]]?J[i[1]]:0;0===n&&(n=J.webp),n!==J.webp||Q.isWebpSupport||(n=0);var l=a.is("img")?W.img_src:W.b_url;if(l===W.b_url){var d=t;if(d||(d=N(a)),void 0===D.cssobj.obj[d]||void 0===D.cssobj.obj[d][l])D.cssobj.obj[d]={},-1!==s.indexOf(" !important")&&F.push(d);s=s.replace(" !important","")}l!==W.img_src||a.attr("src")||a.attr("src",L);var _,c,u,g=null;_=a.width(),c=a.height(),a.data("fb_img_type",n),u=Y(a,s+":"+n,_,c),D.is_debug_pws&&console.log("cached_key: "+u);var f=/(jpe?g|png|webp)$/i.test(s);if(f||T.set(u,s),!I||!f){g=T.get(u);var p=!1;if(D.stage_loaded<1&&(!g||!f)&&P&&Q.isWebpSupport){var b=s+":"+n;!D.fast_cache[b]&&f||(f&&(g=D.fast_cache[b]),p=!0,$(a,t)&&V(g,a,t,!0,!0))}if(g)return D.stage_loaded<1&&!p?$(a,t)?V(g,a,t,!0,!1,!0):U():G(s,g,a,t,o,u,!0)}0===a.length&&(a=E(t.replace(/(\:| ).*$/gi,"")));var v=!1,h=l===W.img_src?"cover":a.css("background-size");e&&0===r.length&&(h="contain"),"cover"===h&&(v=!0);var w=null;if("cover"!==h&&"contain"!==h){var m=/^(|(\d*)(px|%|auto)) (|(\d*)(px|%|auto))$/i,A=h.match(m);null==A&&(m=/^(|(\d*)(px|%|auto))$/i,A=h.match(m));var j=!1,y=!1;null!=A&&(w=a,A[3]&&"auto"!==A[3].toLowerCase()?(_=parseInt(A[2]),"%"===A[3].toLowerCase()&&(100<=_&&(v=!0),_=w.width()/100*_,_+=10)):j=!0,7===A.length&&A[6]&&"auto"!==A[6].toLowerCase()?(c=parseInt(A[5]),"%"===A[6].toLowerCase()&&(100<=c&&(v=!0),c=w.height()/100*c,c+=10)):(7===A.length||j)&&(y=!0)),j&&y?(_=E(window).width(),c=E(window).height()):(j||y)&&(v=!0)}else if(l===W.img_src&&-1!==[_,c].indexOf(1))for(w=a.parent();1===_&&(_=w.width()),1===c&&(c=w.height()),1===_||1===c;)w=w.parent();v=v?1:0;var S=1<=D.stage_loaded?2<=D.stage_loaded?0:1:2;if(Q.isRetinaDisplay&&(_*=2,c*=2),!I){var x="tmp_width"+(e?"_c_"+o:""),k="tmp_height"+(e?"_c_"+o:""),B=parseInt(a.data(x));B||(B=0);var O=parseInt(a.data(k));if(O||(O=0),_<=B&&c<=O&&!a.hasClass("fb_dynamic_url")&&(g=(g=X(a,t)).replace(" !important","")))return G(s,g,a,t,o,u,!0);1<=D.stage_loaded&&(B<_?a.data(x,_):_=B,O<c?a.data(k,c):c=O)}if(_||c){var R=_+"x"+c;e&&0===r.length&&(a=r),D.stage_loaded<2?z.push({img_obj:a,fb_selector:t,fb_tmp_attr_p:o,cached_key:u,web_url:s,cover_size:v,cont_size:R,def_size:S,end_type:n}):q({fast_background:"get_cached_url",web_url:s,cover_size:v,cont_size:R,def_size:S,end_type:n},function(e){G(s,e,a,t,o,u)},C)}else U()}else U()}(M=t[e].is_fb_class?t[e]:E(t[e]));if(P&&D.cssobj.update(),D.stage_loaded<2&&z.length){for(var b={web_url:"",cover_size:"",cont_size:"",def_size:"",end_type:""},v=0;v<z.length;v++)for(var h in b)b.hasOwnProperty(h)&&(f=v,b[p=h]+=z[f][p]+":");b.fast_background="get_cached_urls",q(b,function(e){if(e){e=e.split(":");for(var a=0;a<z.length;a++)G(z[a].url,e[a],z[a].img_obj,z[a].fb_selector,z[a].fb_tmp_attr_p,z[a].cached_key)}},C)}}},E=jQuery;D=E.extend(fast_background,D);var Q=null,w=!1,m=null,A=0,j=[],W={b_url:"background-image",img_src:"src"},F=[],L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",P=!0,o=E(window).height(),T={data:{},get:function(e){return!this.data[e]&&Q.isLocalStorageSupported&&(this.data[e]=localStorage.getItem(e)),this.data[e]},set:function(e,a){this.data[e]=a,Q.isLocalStorageSupported&&D.use_local_storage&&localStorage.setItem(e,a)},del:function(e){this.data[e]&&(delete this.data[e],Q.isLocalStorageSupported&&localStorage.removeItem(e))}},y=!1,J={jpg:2,png:3,webp:18};E(function(){E(window).on("beforeunload.fast_background",function(e){w=!0});var a=E(window).width();E(window).resize(function(){if(!D.resize_event)return!0;var e=E(window).width();D.stage_loaded<2||Q.isMobile.any&&a===e||-1===window.location.host.indexOf("yandex.net")&&(E(".fb_loaded").removeClass("fb_loaded"),a=E(window).width(),D.update())}),E(document).on("scroll mousemove touchstart",function(e){P&&0<D.stage_loaded&&(P=!1,D.is_debug_pws&&console.warn("load_only_visible set false"),fast_background.update())})});var _=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,a){window.setTimeout(e,1e3/60)},U=null,n=[],l=null,S={get_all:function(e){var a=e.attr("data-urls");return void 0===a?{}:(a=a.replace(/'/gi,'"'),a=E.parseJSON(a))},get:function(e,a){return this.get_all(e)[a]},set_all:function(e,a){var t=E.toJSON(a);t=t.replace(/\"/gi,"'"),e.attr("data-urls",t),isEmptyObject(a)&&this.del_all(e)},set:function(e,a,t){var o=this.get_all(e);o[a]=t,this.set_all(e,o)},del_all:function(e){e.removeAttr("data-urls")},del:function(e,a){var t=this.get_all(e);delete t[a],this.set_all(e,t)},all_exist:function(e){return void 0!==e.attr("data-urls")}},s={},x=!1,k="IntersectionObserver"in window?new IntersectionObserver(function(e){if(P)setTimeout(arguments.callee.bind(this,e),300);else for(var a in x=!0,e){var t=e[a];if(t.isIntersecting){var o=E(t.target),s=o.data("fb_sel"),r=null;s&&g(s)&&(r=o.attr("data-url"))&&f(o,r);var i=o.data("fb_sels");if(i)for(s in i)if(g(s)){var n=s.split(/(?=[: ])/g),l=n[0];n[0]="";var d=n.join("");" "===d.substr(0,1)&&(d=d.substr(1));var _=o.closest(l);f(o,r=S.get(_,d),s)}}}},{rootMargin:"0px 1000px "+(o+o/2)+"px 1000px"}):null}function c(e){return!/(\/(m_)?def_|^data:)/.test(e)}function q(o,s,r){if(A>=D.max_ajax_post_stream)setTimeout(arguments.callee.bind(this,o,s,r),100);else{A++,D.is_debug_pws&&(console.log("ajax begin"),console.log("pws "+A));E.post(D.ajax_url.replace(window.location.hash,""),o,function(e){if(A--,D.is_debug_pws&&(console.log("ajax end"),console.log("pws "+A)),!w){var a="<->ajax_complete<->";if(e.substring(e.length-a.length)!==a)return r?r(e):console.error("ERROR POST AJAX: "+e),void s(null);e=e.substring(0,e.length-a.length),s&&s(e)}}).fail(function(e,a,t){A--,D.is_debug_pws&&(console.error("ajax fail"),console.log("pws "+A)),w||(r?r("ERROR POST AJAX: <div style='white-space: pre-wrap; word-wrap:break-word;'>"+window.location.href+" "+(E.toJSON?E.toJSON(o):"")+"</div><br>ERROR TEXT: "+t):console.error("ERROR POST AJAX: "+t),s(null))})}}function u(a,e,t,o){if(!o){if(!a)return void(t&&t(a));n.push([a,e,t])}var s=A>=D.max_ajax_post_stream;if(s&&null===l&&(l=setInterval(arguments.callee.bind(this,null,null,null,!0),10)),!s&&n.length){var r=n[0];a=r[0],e=r[1],t=r[2],n.splice(0,1),n.length||(clearInterval(l),l=null),A++,D.is_debug_pws&&(console.warn("load_img "+a),console.log("pws "+A));var i=new Image;i.onload=function(){A--,D.is_debug_pws&&(console.log("loaded_img "+a),console.log("pws "+A)),e&&e(a)},i.onerror=function(e){return A--,D.is_debug_pws&&(console.log("img on error "+a),console.log("pws "+A)),e.preventDefault(),e.stopPropagation(),t&&t(),!1},i.src=a,n.length&&arguments.callee.apply(this,null,null,null,!0)}}function N(e,a){var t=e.attr("id");(t&&(t="#"+t),t||(t=e.is("body")?"fb_body":"fb_"+Math.random().toString(36).substr(2,9),e.attr("id",t),t="#"+t),a)&&(t=t+(0===a.indexOf(":")?"":" ")+a);return t=D.prepare_selector_hook(t)}function V(e,t,a,o,s,r){D.is_debug_pws&&console.log("set_f-"+e),c(e)&&(t.hasClass("fb_loaded")&&(t.removeClass("fb_loaded"),t.addClass("fb_dynamic_url")),t.hasClass("fb_dynamic_url")||s||r||t.addClass("fb_loaded"),t.data("fb_last_load_url",e));var i=t&&t.is("img")?W.img_src:W.b_url;try{switch(i){case W.b_url:var n=a;n?E(n).css(i,""):(t[0].style[i]="",n=N(t)),void 0===D.cssobj.obj[n]&&(D.cssobj.obj[n]={});var l=!l&&-1!==F.indexOf(n),d="url("+e+")"+(l?" !important":"");D.cssobj.obj[n][i]&&D.cssobj.obj[n][i]!==d&&(!0,D.cssobj.obj[n][i]="none",D.cssobj.obj[n].backgroundImage="none",o||D.cssobj.update()),D.cssobj.obj[n][i]=d,D.cssobj.obj[n].backgroundImage=d,o||D.cssobj.update();break;case W.img_src:t.attr(i)!==e&&t.attr(i,e),_(function(){var e=E(window).width(),a=t.width();(500<e&&e<a||Q.isMobile.anyPhone&&a<10)&&t.css("width","100%")},t[0])}!s&&t.hasClass("fb_ev_img_load")&&t.trigger("fb_ev_img_load",[e])}catch(e){console.warn(e.message)}s||U()}function X(e,a){var t=e.is("img")?W.img_src:W.b_url;switch(t){case W.b_url:var o=a;if(o||(o=N(e)),void 0===D.cssobj.obj[o])return"";var s=D.cssobj.obj[o][t];return s?s.replace(/url\(['"]?|['"]?\)/g,""):"";case W.img_src:var r=e.attr(t);return void 0===r&&(r=""),r}}function Y(e,a,t,o){t||(t=e.width()),o||(o=e.height());t-=t%10,o-=o%10;var s="";try{var r=new Date;s=r.getDate()+r.getMonth()+r.getFullYear()}catch(e){}return"fast_background_cached_url_"+t+"x"+o+"_"+a+"_"+s}function $(e,a){if(P){var t=e[0].getBoundingClientRect();return t.top<o&&(t.top||t.height)||e.hasClass("fb_ignore_io")}return!k||s[a||N(e)]||e.hasClass("fb_ignore_io")}function G(e,a,t,o,s,r,i){function n(){T.del(r),t.removeClass("fb_loaded"),t.data("fb_before_error",!0),U()}if(a){if(a&&!/(^data:)/.test(a)&&!i&&c(a)&&T.set(r,a),!c(a)){var l="tmp_width"+(o?"_c_"+s:""),d="tmp_height"+(o?"_c_"+s:"");t.removeData(l),t.removeData(d)}$(t,o)?(t.hasClass("fb_ev_img_cache_url")&&t.trigger("fb_ev_img_cache_url",[a]),t.data("fb_before_error")&&(a+="?is_retry=1"),u(a,function(){V(a,t,o)},n)):U()}else n()}function g(e){return!s[e]&&(s[e]=!0)}function f(e,a,t){(a=a.replace(" !important",""))&&D.clear_urls_pattern&&(a=a.replace(D.clear_urls_pattern,"")),a=a.split(":")[0],a+=":"+e.data("fb_img_type");var o=Y(e,a),s=T.get(o);!s||e.hasClass("fb_loaded")&&e.data("fb_last_load_url")===s?k&&k.unobserve(e[0]):(D.ajax_is_work++,e.data("fb_before_error")&&(s+="?is_retry=1"),u(s,function(){k&&k.unobserve(e[0]),V(s,e,t)},function(){e.removeClass("fb_loaded"),e.data("fb_before_error",!0),T.del(o),U()}))}}();