/**
 * @overview FastBackground https://github.com/showyweb/FastBackground
 * @version 5.3.10
 * @author  Novojilov Pavel Andreevich (The founder of the library)
 * @license MIT license. http://www.opensource.org/licenses/mit-license.php
 * @copyright (c) 2017 Pavel Novojilov
 */
!function(){if(-1===window.location.host.indexOf("yandex.net")){var E={resize_event:!0,ajax_url:window.location.href,max_ajax_post_stream:3,ajax_is_work:0,update_is_worked:!1,stage_loaded:-1,timeout_size:50,cssobj:null,is_debug_pws:!1,use_local_storage:!0,clear_urls_pattern:"",prepare_selector_hook:function(e){return e},update:function(t,I,B){if(null===Q&&function(){Q={isMobile:{Android:!!navigator.userAgent.match(/Android/i),BlackBerry:!!navigator.userAgent.match(/BlackBerry|BB/i),iOS:!!navigator.userAgent.match(/iPhone|iPad|iPod/i),Windows:!!navigator.userAgent.match(/IEMobile/i)},isLocalStorageSupported:!1,isSessionStorageSupported:!1};try{Q.isLocalStorageSupported="undefined"!=typeof localStorage,Q.isSessionStorageSupported="undefined"!=typeof sessionStorage}catch(e){console.log(e.message)}if(Q.isSessionStorageSupported)try{sessionStorage.setItem("test_sessionStorage",1),sessionStorage.removeItem("test_sessionStorage")}catch(e){Q.isLocalStorageSupported=!1,Q.isSessionStorageSupported=!1}Q.isMobile.any=Q.isMobile.Android||Q.isMobile.BlackBerry||Q.isMobile.iOS||Q.opera_mini||Q.isMobile.Windows,Q.isMobile.anyPhone=!!Q.isMobile.any&&(!!navigator.userAgent.match(/iphone|ipod/i)||Q.isMobile.Android&&!!navigator.userAgent.match(/mobile/i)||Q.isMobile.BlackBerry&&!navigator.userAgent.match(/tablet/i)||Q.isMobile.Windows),Q.isRetinaDisplay=(e=1<window.devicePixelRatio,e),Q.isWebpSupport=function(){var e="object"==typeof document?document.createElement("canvas"):{};e.width=e.height=1;var t=!!e.toDataURL&&5===e.toDataURL("image/webp").indexOf("image/webp");if(t)return t;var a=new Image,o=function(e){Q.isWebpSupport=!(!e||"load"!==e.type)&&1===a.width};return a.onerror=o,a.onload=o,a.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==",-1}();var e}(),(E.update_is_worked||-1!==E.stage_loaded&&!x||-1===Q.isWebpSupport)&&!S)return t&&j.push(t),clearTimeout(m),void(m=setTimeout(arguments.callee.bind(this,null,I),E.timeout_size));switch(S=!1,E.update_is_worked=!0,E.stage_loaded){case-1:case 3:E.stage_loaded=0}E.is_debug_pws&&console.warn("fb.stage_loaded "+E.stage_loaded),A=0,E.is_debug_pws&&console.log("pws set "+A),w=!1,null===E.cssobj&&(E.cssobj=cssobj({})),F=null,F=function(){if(E.ajax_is_work--,E.is_debug_pws&&console.log("ajax_is_work "+E.ajax_is_work),E.ajax_is_work<1)if(E.stage_loaded<2)E.stage_loaded<1?(E.cssobj.update(),E.stage_loaded=1,k||(x=!(J=!1))):E.stage_loaded=2,S=!0,E.update(t,I,B);else{E.stage_loaded=3,t&&t();for(var e=0;e<j.length;e++)j[e]();j=[],E.update_is_worked=!1}};var M,e,a=[],o=P(".fast_background:not(.fb_loaded)").toArray(),s=[];for(e=0;e<o.length;e++)s.push(P(o[e]));for(o=s,s=null,e=0;e<o.length;e++){var r=V(M=o[e]);if(a.push(M),(!M.data("is_fb_observed")||M.attr("data-url")&&!M.data("fb_sel"))&&(M.data("is_fb_observed",!0),M.data("fb_sel",r),k&&k.observe(M[0])),!M.is_fb_class&&y.all_exist(M)){var i=y.get_all(M);for(var n in i)if(i.hasOwnProperty(n)){var l=i[n];r=V(M,n);var _=P(r.replace(":hover","").replace(":active","").replace(":focus",""));if(0<_.length){for(var d=0;d<1;d++){var c=_.eq(d);c.data("is_fb_observed")||c.data("is_fb_observed",!0),k&&k.observe(c[0]);var u=null;c.data("fb_sels")?u=c.data("fb_sels"):(u={},c.data("fb_sels",u)),u[r]=!0}var g=_.eq(0)}a.push({is_fb_class:!0,first_elem:g,url:l,fb_selector:r})}}}if(E.ajax_is_work+=a.length,E.ajax_is_work<1)return E.update_is_worked=!1,E.stage_loaded=-1,void(t&&t());var f,b,D=[];for(e=0;e<a.length;e++)!function(t){var a=null,o=null,s=null,e=!1,r=null;if(t.is_fb_class){if(e=!0,r=M.first_elem,s=t.url,a=t.fb_selector,o=a?a.replace(/ |>|\*|\(|\)|\+|\@/gi,"_"):"",!(t=t.first_elem))return F()}else s=t.attr("data-url"),a=null;if(X(s)){E.clear_urls_pattern&&(s=s.replace(E.clear_urls_pattern,""));var i=s.split(":");s=i[0],i[1]||(i[1]=null);var n=q[i[1]]?q[i[1]]:0;0===n&&(n=q.webp),n!==q.webp||Q.isWebpSupport||(n=0);var l=t.is("img")?T.img_src:T.b_url;if(l===T.b_url){var _=a;if(_||(_=V(t)),void 0===E.cssobj.obj[_]||void 0===E.cssobj.obj[_][l])E.cssobj.obj[_]={},-1!==s.indexOf(" !important")&&L.push(_);s=s.replace(" !important","")}l!==T.img_src||t.attr("src")||t.attr("src",W);var d,c,u,g=null;d=t.width(),c=t.height(),t.data("fb_img_type",n),u=G(t,s+":"+n,d,c),E.is_debug_pws&&console.log("cached_key: "+u);var f=/\.(jpe?g|png|webp)$/i.test(s);if(f||U.set(u,s),!B||!f){g=U.get(u);var b=!1;if(E.stage_loaded<1&&(!g||!f)&&J&&Q.isWebpSupport){var p=s+":"+n;if((E.fast_cache[p]||!f)&&(f&&(g=E.fast_cache[p]),b=!0,K(t,a))){var h=Y(t,a,!0);X(h)?t.hasClass("fb_ev_img_load")&&t.trigger("fb_ev_img_load",[h]):$(g,t,a,!0,!0)}}if(g)return E.stage_loaded<1&&!b?K(t,a)?X(Y(t,a,!0))?H(s,g,t,a,o,u,!0):$(g,t,a,!0,!1,!0):F():H(s,g,t,a,o,u,!0)}0===t.length&&(t=P(a.replace(/(\:| ).*$/gi,"")));var v=!1,w=l===T.img_src?"cover":t.css("background-size");e&&0===r.length&&(w="contain"),"cover"===w&&(v=!0);var m=null;if("cover"!==w&&"contain"!==w){var A=/^(|(\d*)(px|%|auto)) (|(\d*)(px|%|auto))$/i,j=w.match(A);null==j&&(A=/^(|(\d*)(px|%|auto))$/i,j=w.match(A));var S=!1,y=!1;null!=j&&(m=t,j[3]&&"auto"!==j[3].toLowerCase()?(d=parseInt(j[2]),"%"===j[3].toLowerCase()&&(100<=d&&(v=!0),d=m.width()/100*d,d+=10)):S=!0,7===j.length&&j[6]&&"auto"!==j[6].toLowerCase()?(c=parseInt(j[5]),"%"===j[6].toLowerCase()&&(100<=c&&(v=!0),c=m.height()/100*c,c+=10)):(7===j.length||S)&&(y=!0)),S&&y?(d=P(window).width(),c=P(window).height()):(S||y)&&(v=!0)}else if(l===T.img_src&&-1!==[d,c].indexOf(1))for(m=t.parent();1===d&&(d=m.width()),1===c&&(c=m.height()),1===d||1===c;)m=m.parent();v=v?1:0;var x=1<=E.stage_loaded?2<=E.stage_loaded?0:1:2;if(Q.isRetinaDisplay&&(d*=2,c*=2),!B){var k="tmp_width"+(e?"_c_"+o:""),R="tmp_height"+(e?"_c_"+o:""),O=parseInt(t.data(k));O||(O=0);var C=parseInt(t.data(R));if(C||(C=0),d<=O&&c<=C&&!t.hasClass("fb_dynamic_url")&&X(g=(g=Y(t,a)).replace(" !important","")))return H(s,g,t,a,o,u,!0);1<=E.stage_loaded&&(O<d?t.data(k,d):d=O,C<c?t.data(R,c):c=C)}if(d||c){var z=d+"x"+c;e&&0===r.length&&(t=r),E.stage_loaded<2?D.push({img_obj:t,fb_selector:a,fb_tmp_attr_p:o,cached_key:u,web_url:s,cover_size:v,cont_size:z,def_size:x,end_type:n}):N({fast_background:"get_cached_url",web_url:s,cover_size:v,cont_size:z,def_size:x,end_type:n},function(e){H(s,e,t,a,o,u)},I)}else F()}else F()}(M=a[e].is_fb_class?a[e]:P(a[e]));if(J&&E.cssobj.update(),E.stage_loaded<2&&D.length){for(var p={web_url:"",cover_size:"",cont_size:"",def_size:"",end_type:""},h=0;h<D.length;h++)for(var v in p)p.hasOwnProperty(v)&&(f=h,p[b=v]+=D[f][b]+":");p.fast_background="get_cached_urls",N(p,function(e){if(e){e=e.split(":");for(var t=0;t<D.length;t++)H(D[t].url,e[t],D[t].img_obj,D[t].fb_selector,D[t].fb_tmp_attr_p,D[t].cached_key)}else for(t=0;t<D.length;t++)F()},function(){for(var e=0;e<D.length;e++)!function(t,a,e,o,s,r,i,n,l){N({fast_background:"get_cached_url",web_url:a,cover_size:e,cont_size:o,def_size:s,end_type:r},function(e){H(a,e,t,i,n,l)},I)}(D[e].img_obj,D[e].web_url,D[e].cover_size,D[e].cont_size,D[e].def_size,D[e].end_f_type,D[e].fb_selector,D[e].fb_tmp_attr_p,D[e].cached_key)},1e3)}}},P=jQuery;E=P.extend(fast_background,E);var Q=null,w=!1,m=null,A=0,i=0,j=[],T={b_url:"background-image",img_src:"src"},L=[],W="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",J=!0,o=P(window).height(),U={data:{},get:function(e){return!this.data[e]&&Q.isLocalStorageSupported&&(this.data[e]=localStorage.getItem(e)),this.data[e]},set:function(e,t){this.data[e]=t,Q.isLocalStorageSupported&&E.use_local_storage&&localStorage.setItem(e,t)},del:function(e){this.data[e]&&(delete this.data[e],Q.isLocalStorageSupported&&localStorage.removeItem(e))}},S=!1,q={jpg:2,png:3,webp:18};P(function(){P(window).on("beforeunload.fast_background",function(e){w=!0});var t=P(window).width();P(window).resize(function(){if(!E.resize_event)return!0;var e=P(window).width();E.stage_loaded<2||Q.isMobile.any&&t===e||-1===window.location.host.indexOf("yandex.net")&&(P(".fb_loaded").removeClass("fb_loaded"),t=P(window).width(),E.update())}),P(document).on("scroll mousemove touchstart",function(e){J&&0<E.stage_loaded&&(J=!1,E.is_debug_pws&&console.warn("load_only_visible set false"),fast_background.update())})});var d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)},F=null,n=[],l=null,y={get_all:function(e){var t=e.attr("data-urls");return void 0===t?{}:(t=t.replace(/'/gi,'"'),t=P.parseJSON(t))},get:function(e,t){return this.get_all(e)[t]},set_all:function(e,t){var a=P.toJSON(t);a=a.replace(/\"/gi,"'"),e.attr("data-urls",a),isEmptyObject(t)&&this.del_all(e)},set:function(e,t,a){var o=this.get_all(e);o[t]=a,this.set_all(e,o)},del_all:function(e){e.removeAttr("data-urls")},del:function(e,t){var a=this.get_all(e);delete a[t],this.set_all(e,a)},all_exist:function(e){return void 0!==e.attr("data-urls")}},s={},x=!1,k="IntersectionObserver"in window?new IntersectionObserver(function(e){if(J)setTimeout(arguments.callee.bind(this,e),300);else for(var t in x=!0,e){var a=e[t];if(a.isIntersecting){var o=P(a.target),s=o.data("fb_sel"),r=null;s&&g(s)&&(r=o.attr("data-url"))&&X(r)&&f(o,r);var i=o.data("fb_sels");if(i)for(s in i)if(g(s)){var n=s.split(/(?=[: ])/g),l=n[0];n[0]="";var _=n.join("");" "===_.substr(0,1)&&(_=_.substr(1));var d=o.closest(l);X(r=y.get(d,_))&&f(o,r,s)}}}},{rootMargin:"0px 1000px "+(o+o/2)+"px 1000px"}):null}function c(e){return!/(\/(m_)?def_)/.test(e)}function N(o,s,r,e){if(A>=E.max_ajax_post_stream||i)setTimeout(arguments.callee.bind(this,o,s,r,e),100);else{A++,E.is_debug_pws&&(console.log("ajax begin"),console.log("pws "+A));var t=o,a={url:E.ajax_url.replace(window.location.hash,""),method:"post",data:t,complete:function(e){var t=e.responseText;if(200===e.status){if(A--,E.is_debug_pws&&(console.log("ajax end"),console.log("pws "+A)),w)return;var a="<->ajax_complete<->";if(t.substring(t.length-a.length)!==a)return r?r(t):console.error("ERROR POST AJAX: "+t),void s(null);t=t.substring(0,t.length-a.length),s&&s(t)}else{if(A--,E.is_debug_pws&&(console.error("ajax fail"),console.log("pws "+A)),w)return;r?r("ERROR POST AJAX: <div style='white-space: pre-wrap; word-wrap:break-word;'>"+window.location.href+" "+(P.toJSON?P.toJSON(o):"")+"</div><br>ERROR TEXT: "+e.statusText):console.error("ERROR POST AJAX: "+e.statusText),s(null)}}};e&&(a.timeout=e),P.ajax(a)}}function u(t,e,a,o){if(!o){if(!t)return void(a&&a(t));n.push([t,e,a])}if(n.length){var s=n[0];t=s[0],e=s[1],a=s[2],n.splice(0,1),n.length||(clearInterval(l),l=null),i++,E.is_debug_pws&&(console.warn("load_img "+t),console.log("ilws "+i));var r=new Image;r.onload=function(){i--,E.is_debug_pws&&(console.log("loaded_img "+t),console.log("ilws "+i)),e&&e(t)},r.onerror=function(e){return i--,E.is_debug_pws&&(console.log("img on error "+t),console.log("ilws "+i)),e.preventDefault(),e.stopPropagation(),a&&a(),!1},r.src=t,n.length&&arguments.callee.apply(this,null,null,null,!0)}}function V(e,t){var a=e.attr("id");(a&&(a="#"+a),a||(a=e.is("body")?"fb_body":"fb_"+Math.random().toString(36).substr(2,9),e.attr("id",a),a="#"+a),t)&&(a=a+(0===t.indexOf(":")?"":" ")+t);return a=E.prepare_selector_hook(a)}function X(e){return/\.(jpe?g|png|webp|gif|svg)($|:| !|\?)/i.test(e)}function $(e,a,t,o,s,r){if(E.is_debug_pws&&console.log("set_f-"+e),X(e)){c(e)&&(a.hasClass("fb_loaded")&&(a.removeClass("fb_loaded"),a.addClass("fb_dynamic_url")),a.hasClass("fb_dynamic_url")||s||r||a.addClass("fb_loaded"),a.data("fb_last_load_url",e));var i=a&&a.is("img")?T.img_src:T.b_url;try{switch(i){case T.b_url:var n=t;n?P(n).css(i,""):(a[0].style[i]="",n=V(a)),void 0===E.cssobj.obj[n]&&(E.cssobj.obj[n]={});var l=!l&&-1!==L.indexOf(n),_="url("+e+")"+(l?" !important":"");E.cssobj.obj[n][i]&&E.cssobj.obj[n][i]!==_&&(!0,E.cssobj.obj[n][i]="none",E.cssobj.obj[n].backgroundImage="none",o||E.cssobj.update()),E.cssobj.obj[n][i]=_,E.cssobj.obj[n].backgroundImage=_,o||E.cssobj.update();break;case T.img_src:a.attr(i)!==e&&a.attr(i,e),d(function(){var e=P(window).width(),t=a.width();(500<e&&e<t||Q.isMobile.anyPhone&&t<10)&&a.css("width","100%")},a[0])}/*!ajax_work_not_minus &&*/a.hasClass("fb_ev_img_load")&&a.trigger("fb_ev_img_load",[e])}catch(e){console.warn(e.message)}}s||F()}function Y(e,t,a){var o=e.is("img")?T.img_src:T.b_url;switch(o){case T.b_url:var s="";if(a)s=e.css(o);else{var r=t;if(r||(r=V(e)),void 0===E.cssobj.obj[r])return"";s=E.cssobj.obj[r][o]}return s?s.replace(/url\(['"]?|['"]?\)/g,""):"";case T.img_src:var i=e.attr(o);return void 0===i&&(i=""),i}}function G(e,t,a,o){a||(a=e.width()),o||(o=e.height());a-=a%10,o-=o%10;var s="";try{var r=new Date;s=r.getDate()+r.getMonth()+r.getFullYear()}catch(e){}return"fast_background_cached_url_"+a+"x"+o+"_"+t+"_"+s}function K(e,t){if(J){var a=e[0].getBoundingClientRect();return a.top<o&&(a.top||a.height)||e.hasClass("fb_ignore_io")}return!k||s[t||V(e)]||e.hasClass("fb_ignore_io")}function H(e,t,a,o,s,r,i,n){function l(){U.del(r),a.removeClass("fb_loaded"),a.data("fb_before_error",!0),F()}if(t){if(c(t))t&&!i&&U.set(r,t);else{var _="tmp_width"+(o?"_c_"+s:""),d="tmp_height"+(o?"_c_"+s:"");a.removeData(_),a.removeData(d)}K(a,o)?(a.hasClass("fb_ev_img_cache_url")&&a.trigger("fb_ev_img_cache_url",[t]),a.data("fb_before_error")&&(t+="?is_retry=1"),u(t,function(){$(t,a,o,!1,n)},l)):n||F()}else l()}function g(e){return!s[e]&&(s[e]=!0)}function f(e,t,a){(t=t.replace(" !important",""))&&E.clear_urls_pattern&&(t=t.replace(E.clear_urls_pattern,"")),t=t.split(":")[0],t+=":"+e.data("fb_img_type");var o=G(e,t),s=U.get(o);!s||e.hasClass("fb_loaded")&&e.data("fb_last_load_url")===s?k&&k.unobserve(e[0]):(E.ajax_is_work++,e.data("fb_before_error")&&(s+="?is_retry=1"),u(s,function(){k&&k.unobserve(e[0]),$(s,e,a)},function(){e.removeClass("fb_loaded"),e.data("fb_before_error",!0),U.del(o),F()}))}}();