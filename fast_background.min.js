/**
 * @overview FastBackground https://github.com/showyweb/FastBackground
 * @version 5.4.0
 * @author  Novojilov Pavel Andreevich (The founder of the library)
 * @license MIT license. http://www.opensource.org/licenses/mit-license.php
 * @copyright (c) 2017 Pavel Novojilov
 */
!function(){if(-1===window.location.host.indexOf("yandex.net")){var D={resize_event:!0,ajax_url:window.location.href,max_ajax_post_stream:3,ajax_is_work:0,update_is_worked:!1,stage_loaded:-1,timeout_size:50,cssobj:null,is_debug_pws:!1,use_local_storage:!0,clear_urls_pattern:"",prepare_selector_hook:function(e){return e},update:function(t,z,B){if(null===T&&function(){T={isMobile:{Android:!!navigator.userAgent.match(/Android/i),BlackBerry:!!navigator.userAgent.match(/BlackBerry|BB/i),iOS:!!navigator.userAgent.match(/iPhone|iPad|iPod/i),Windows:!!navigator.userAgent.match(/IEMobile/i)},isLocalStorageSupported:!1,isSessionStorageSupported:!1};try{T.isLocalStorageSupported="undefined"!=typeof localStorage,T.isSessionStorageSupported="undefined"!=typeof sessionStorage}catch(e){console.log(e.message)}if(T.isSessionStorageSupported)try{sessionStorage.setItem("test_sessionStorage",1),sessionStorage.removeItem("test_sessionStorage")}catch(e){T.isLocalStorageSupported=!1,T.isSessionStorageSupported=!1}T.isMobile.any=T.isMobile.Android||T.isMobile.BlackBerry||T.isMobile.iOS||T.opera_mini||T.isMobile.Windows,T.isMobile.anyPhone=!!T.isMobile.any&&(!!navigator.userAgent.match(/iphone|ipod/i)||T.isMobile.Android&&!!navigator.userAgent.match(/mobile/i)||T.isMobile.BlackBerry&&!navigator.userAgent.match(/tablet/i)||T.isMobile.Windows),T.isRetinaDisplay=(e=1<window.devicePixelRatio,e),T.isWebpSupport=function(){var e="object"==typeof document?document.createElement("canvas"):{};e.width=e.height=1;var t=!!e.toDataURL&&5===e.toDataURL("image/webp").indexOf("image/webp");if(t)return t;var a=new Image,o=function(e){T.isWebpSupport=!(!e||"load"!==e.type)&&1===a.width};return a.onerror=o,a.onload=o,a.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==",-1}();var e}(),(D.update_is_worked||-1!==D.stage_loaded&&!k||-1===T.isWebpSupport)&&!y)return t&&j.push(t),clearTimeout(w),void(w=setTimeout(arguments.callee.bind(this,null,z),D.timeout_size));switch(y=!1,D.update_is_worked=!0,D.stage_loaded){case-1:case 3:D.stage_loaded=0}D.is_debug_pws&&console.warn("fb.stage_loaded "+D.stage_loaded),A=0,D.is_debug_pws&&console.log("pws set "+A),m=!1,null===D.cssobj&&(D.cssobj=cssobj({})),N=null,N=function(){if(D.ajax_is_work--,D.is_debug_pws&&console.log("ajax_is_work "+D.ajax_is_work),D.ajax_is_work<1)if(D.stage_loaded<2)D.stage_loaded<1?(D.cssobj.update(),D.stage_loaded=1,x||(k=!(J=!1))):D.stage_loaded=2,y=!0,D.update(t,z,B);else{D.stage_loaded=3,t&&t();for(var e=0;e<j.length;e++)j[e]();j=[],D.update_is_worked=!1}};var E,e,a=[],o=L(".fast_background:not(.fb_loaded)").toArray(),r=[];for(e=0;e<o.length;e++)r.push(L(o[e]));for(o=r,r=null,e=0;e<o.length;e++){var s=V(E=o[e]);if(a.push(E),(!E.data("is_fb_observed")||E.attr("data-url")&&!E.data("fb_sel"))&&(E.data("is_fb_observed",!0),E.data("fb_sel",s),x&&x.observe(E[0])),!E.is_fb_class&&S.all_exist(E)){var i=S.get_all(E);for(var n in i)if(i.hasOwnProperty(n)){var l=i[n];s=V(E,n);var d=L(s.replace(":hover","").replace(":active","").replace(":focus",""));if(0<d.length){for(var _=0;_<1;_++){var c=d.eq(_);c.data("is_fb_observed")||c.data("is_fb_observed",!0),x&&x.observe(c[0]);var u=null;c.data("fb_sels")?u=c.data("fb_sels"):(u={},c.data("fb_sels",u)),u[s]=!0}var g=d.eq(0)}a.push({is_fb_class:!0,first_elem:g,url:l,fb_selector:s})}}}if(D.ajax_is_work+=a.length,D.ajax_is_work<1)return D.update_is_worked=!1,D.stage_loaded=-1,void(t&&t());var f,b,M=[];for(e=0;e<a.length;e++)!function(t){var a=null,o=null,r=null,e=!1,s=null;if(t.is_fb_class){if(e=!0,s=E.first_elem,r=t.url,a=t.fb_selector,o=a?a.replace(/ |>|\*|\(|\)|\+|\@/gi,"_"):"",!(t=t.first_elem))return N()}else r=t.attr("data-url"),a=null;if(X(r)){D.clear_urls_pattern&&(r=r.replace(D.clear_urls_pattern,""));var i=r.split(":");r=i[0],i[1]||(i[1]=null);var n=q[i[1]]?q[i[1]]:0;0===n&&(n=q.webp),n!==q.webp||T.isWebpSupport||(n=0);var l=t.is("img")?W.img_src:W.b_url;if(l===W.b_url){var d=a;if(d||(d=V(t)),void 0===D.cssobj.obj[d]||void 0===D.cssobj.obj[d][l])D.cssobj.obj[d]={},-1!==r.indexOf(" !important")&&P.push(d);r=r.replace(" !important","")}l!==W.img_src||t.attr("src")||t.attr("src",Q);var _,c,u,g=null;_=t.width(),c=t.height(),t.data("fb_img_type",n),u=G(t,r+":"+n,_,c),D.is_debug_pws&&console.log("cached_key: "+u);var f=/\.(jpe?g|png|webp)$/i.test(r);if(f||U.set(u,r),!B||!f){g=U.get(u);var b=!1;if(D.stage_loaded<1&&(!g||!f)&&J&&T.isWebpSupport){var p=r+":"+n;if((D.fast_cache[p]||!f)&&(f&&(g=D.fast_cache[p]),b=!0,K(t,a))){var v=Y(t,a,!0);X(v)?t.hasClass("fb_ev_img_load")&&t.trigger("fb_ev_img_load",[v]):$(g,t,a,!0,!0)}}if(g)return D.stage_loaded<1&&!b?K(t,a)?X(Y(t,a,!0))?H(r,g,t,a,o,u,!0):$(g,t,a,!0,!1,!0):N():H(r,g,t,a,o,u,!0)}0===t.length&&(t=L(a.replace(/(\:| ).*$/gi,"")));var h=!1,m=l===W.img_src?"cover":t.css("background-size");e&&0===s.length&&(m="contain"),"cover"===m&&(h=!0);var w=null;if("cover"!==m&&"contain"!==m){var A=/^(|(\d*)(px|%|auto)) (|(\d*)(px|%|auto))$/i,j=m.match(A);null==j&&(A=/^(|(\d*)(px|%|auto))$/i,j=m.match(A));var y=!1,S=!1;null!=j&&(w=t,j[3]&&"auto"!==j[3].toLowerCase()?(_=parseInt(j[2]),"%"===j[3].toLowerCase()&&(100<=_&&(h=!0),_=w.width()/100*_,_+=10)):y=!0,7===j.length&&j[6]&&"auto"!==j[6].toLowerCase()?(c=parseInt(j[5]),"%"===j[6].toLowerCase()&&(100<=c&&(h=!0),c=w.height()/100*c,c+=10)):(7===j.length||y)&&(S=!0)),y&&S?(_=L(window).width(),c=L(window).height()):(y||S)&&(h=!0)}else if(l===W.img_src&&-1!==[_,c].indexOf(1))for(w=t.parent();1===_&&(_=w.width()),1===c&&(c=w.height()),1===_||1===c;)w=w.parent();h=h?1:0;var k=1<=D.stage_loaded?2<=D.stage_loaded?0:1:2;if(T.isRetinaDisplay&&(_*=2,c*=2),!B){var x="tmp_width"+(e?"_c_"+o:""),I="tmp_height"+(e?"_c_"+o:""),R=parseInt(t.data(x));R||(R=0);var O=parseInt(t.data(I));if(O||(O=0),_<=R&&c<=O&&!t.hasClass("fb_dynamic_url")&&X(g=(g=Y(t,a)).replace(" !important","")))return H(r,g,t,a,o,u,!0);1<=D.stage_loaded&&(R<_?t.data(x,_):_=R,O<c?t.data(I,c):c=O)}if(_||c){var C=_+"x"+c;e&&0===s.length&&(t=s),D.stage_loaded<2?M.push({img_obj:t,fb_selector:a,fb_tmp_attr_p:o,cached_key:u,web_url:r,cover_size:h,cont_size:C,def_size:k,end_type:n}):F({fast_background:"get_cached_url",web_url:r,cover_size:h,cont_size:C,def_size:k,end_type:n},function(e){H(r,e,t,a,o,u)},z)}else N()}else N()}(E=a[e].is_fb_class?a[e]:L(a[e]));if(J&&D.cssobj.update(),D.stage_loaded<2&&M.length){for(var p={web_url:"",cover_size:"",cont_size:"",def_size:"",end_type:""},v=0;v<M.length;v++)for(var h in p)p.hasOwnProperty(h)&&(f=v,p[b=h]+=M[f][b]+":");p.fast_background="get_cached_urls",F(p,function(e){if(e){e=e.split(":");for(var t=0;t<M.length;t++)H(M[t].url,e[t],M[t].img_obj,M[t].fb_selector,M[t].fb_tmp_attr_p,M[t].cached_key)}else for(t=0;t<M.length;t++)N()},function(){for(var e=0;e<M.length;e++)!function(t,a,e,o,r,s,i,n,l){F({fast_background:"get_cached_url",web_url:a,cover_size:e,cont_size:o,def_size:r,end_type:s},function(e){H(a,e,t,i,n,l)},z)}(M[e].img_obj,M[e].web_url,M[e].cover_size,M[e].cont_size,M[e].def_size,M[e].end_f_type,M[e].fb_selector,M[e].fb_tmp_attr_p,M[e].cached_key)},1e3)}}},L=jQuery;D=L.extend(fast_background,D);var T=null,m=!1,w=null,A=0,i=0,j=[],W={b_url:"background-image",img_src:"src"},P=[],Q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",J=!0,o=L(window).height(),U={data:{},get:function(e){return!this.data[e]&&T.isLocalStorageSupported&&(this.data[e]=localStorage.getItem(e)),this.data[e]},set:function(e,t){this.data[e]=t,T.isLocalStorageSupported&&D.use_local_storage&&localStorage.setItem(e,t)},del:function(e){this.data[e]&&(delete this.data[e],T.isLocalStorageSupported&&localStorage.removeItem(e))}},y=!1,q={jpg:2,png:3,webp:18};L(function(){L(window).on("beforeunload.fast_background",function(e){m=!0});var t=L(window).width();L(window).resize(function(){if(!D.resize_event)return!0;var e=L(window).width();D.stage_loaded<2||T.isMobile.any&&t===e||-1===window.location.host.indexOf("yandex.net")&&(L(".fb_loaded").removeClass("fb_loaded"),t=L(window).width(),D.update())}),L(document).on("scroll mousemove touchstart",function(e){J&&0<D.stage_loaded&&(J=!1,D.is_debug_pws&&console.warn("load_only_visible set false"),fast_background.update())}),null===D.cssobj&&(D.cssobj=cssobj({}));var e={from:{"outline-color":"#fff"},to:{"outline-color":"#000"}},a={"@keyframes nodeInserted":e,"@-moz-keyframes nodeInserted":e,"@-webkit-keyframes nodeInserted":e,"@-ms-keyframes nodeInserted":e,"@-o-keyframes nodeInserted":e,".fast_background":{"animation-duration":"0.001s","animation-name":"nodeInserted"}};D.cssobj.obj=L.extend(D.cssobj.obj,a),D.cssobj.update();var o,r,s,i,n,l=null;function d(e){"nodeInserted"===e.animationName&&(clearTimeout(l),l=setTimeout(_,100))}function _(){fast_background.update()}document.addEventListener("animationstart",d,!1),document.addEventListener("MSAnimationStart",d,!1),document.addEventListener("webkitAnimationStart",d,!1),i=s=r=o=0,n=setInterval(function(){if(null!==l)return clearInterval(n),!1;if(document.scrollingElement&&document.scrollingElement.scrollWidth!==i)return i=document.scrollingElement.scrollWidth,_(),!0;var e=L(".fast-background").length;if(e!==o)return o=e,_(),!0;var t=0,a=0;return L("*").each(function(){var e=L(this);"none"!==e.css("display")&&t++,"hidden"!==e.css("overflow")&&a++}),t!==r||a!==s?(r=t,s=a,_(),!0):void 0},2e3)});var _=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)},N=null,n=[],l=null,S={get_all:function(e){var t=e.attr("data-urls");return void 0===t?{}:(t=t.replace(/'/gi,'"'),t=L.parseJSON(t))},get:function(e,t){return this.get_all(e)[t]},set_all:function(e,t){var a=L.toJSON(t);a=a.replace(/\"/gi,"'"),e.attr("data-urls",a),isEmptyObject(t)&&this.del_all(e)},set:function(e,t,a){var o=this.get_all(e);o[t]=a,this.set_all(e,o)},del_all:function(e){e.removeAttr("data-urls")},del:function(e,t){var a=this.get_all(e);delete a[t],this.set_all(e,a)},all_exist:function(e){return void 0!==e.attr("data-urls")}},r={},k=!1,x="IntersectionObserver"in window?new IntersectionObserver(function(e){if(J)setTimeout(arguments.callee.bind(this,e),300);else for(var t in k=!0,e){var a=e[t];if(a.isIntersecting){var o=L(a.target),r=o.data("fb_sel"),s=null;r&&g(r)&&(s=o.attr("data-url"))&&X(s)&&f(o,s);var i=o.data("fb_sels");if(i)for(r in i)if(g(r)){var n=r.split(/(?=[: ])/g),l=n[0];n[0]="";var d=n.join("");" "===d.substr(0,1)&&(d=d.substr(1));var _=o.closest(l);X(s=S.get(_,d))&&f(o,s,r)}}}},{rootMargin:"0px 1000px "+(o+o/2)+"px 1000px"}):null}function c(e){return!/(\/(m_)?def_)/.test(e)}function F(o,r,s,e){if(A>=D.max_ajax_post_stream||i)setTimeout(arguments.callee.bind(this,o,r,s,e),100);else{A++,D.is_debug_pws&&(console.log("ajax begin"),console.log("pws "+A));var t=o,a={url:D.ajax_url.replace(window.location.hash,""),method:"post",data:t,complete:function(e){var t=e.responseText;if(200===e.status){if(A--,D.is_debug_pws&&(console.log("ajax end"),console.log("pws "+A)),m)return;var a="<->ajax_complete<->";if(t.substring(t.length-a.length)!==a)return s?s(t):console.error("ERROR POST AJAX: "+t),void r(null);t=t.substring(0,t.length-a.length),r&&r(t)}else{if(A--,D.is_debug_pws&&(console.error("ajax fail"),console.log("pws "+A)),m)return;s?s("ERROR POST AJAX: <div style='white-space: pre-wrap; word-wrap:break-word;'>"+window.location.href+" "+(L.toJSON?L.toJSON(o):"")+"</div><br>ERROR TEXT: "+e.statusText):console.error("ERROR POST AJAX: "+e.statusText),r(null)}}};e&&(a.timeout=e),L.ajax(a)}}function u(t,e,a,o){if(!o){if(!t)return void(a&&a(t));n.push([t,e,a])}if(n.length){var r=n[0];t=r[0],e=r[1],a=r[2],n.splice(0,1),n.length||(clearInterval(l),l=null),i++,D.is_debug_pws&&(console.warn("load_img "+t),console.log("ilws "+i));var s=new Image;s.onload=function(){i--,D.is_debug_pws&&(console.log("loaded_img "+t),console.log("ilws "+i)),e&&e(t)},s.onerror=function(e){return i--,D.is_debug_pws&&(console.log("img on error "+t),console.log("ilws "+i)),e.preventDefault(),e.stopPropagation(),a&&a(),!1},s.src=t,n.length&&arguments.callee.apply(this,null,null,null,!0)}}function V(e,t){var a=e.attr("id");(a&&(a="#"+a),a||(a=e.is("body")?"fb_body":"fb_"+Math.random().toString(36).substr(2,9),e.attr("id",a),a="#"+a),t)&&(a=a+(0===t.indexOf(":")?"":" ")+t);return a=D.prepare_selector_hook(a)}function X(e){return/\.(jpe?g|png|webp|gif|svg)($|:| !|\?)/i.test(e)}function $(e,a,t,o,r,s){if(D.is_debug_pws&&console.log("set_f-"+e),X(e)){c(e)&&(a.hasClass("fb_loaded")&&(a.removeClass("fb_loaded"),a.addClass("fb_dynamic_url")),a.hasClass("fb_dynamic_url")||r||s||a.addClass("fb_loaded"),a.data("fb_last_load_url",e));var i=a&&a.is("img")?W.img_src:W.b_url;try{switch(i){case W.b_url:var n=t;n?L(n).css(i,""):(a[0].style[i]="",n=V(a)),void 0===D.cssobj.obj[n]&&(D.cssobj.obj[n]={});var l=!l&&-1!==P.indexOf(n),d="url("+e+")"+(l?" !important":"");D.cssobj.obj[n][i]&&D.cssobj.obj[n][i]!==d&&(!0,D.cssobj.obj[n][i]="none",D.cssobj.obj[n].backgroundImage="none",o||D.cssobj.update()),D.cssobj.obj[n][i]=d,D.cssobj.obj[n].backgroundImage=d,o||D.cssobj.update();break;case W.img_src:a.attr(i)!==e&&a.attr(i,e),_(function(){var e=L(window).width(),t=a.width();(500<e&&e<t||T.isMobile.anyPhone&&t<10)&&a.css("width","100%")},a[0])}/*!ajax_work_not_minus &&*/a.hasClass("fb_ev_img_load")&&a.trigger("fb_ev_img_load",[e])}catch(e){console.warn(e.message)}}r||N()}function Y(e,t,a){var o=e.is("img")?W.img_src:W.b_url;switch(o){case W.b_url:var r="";if(a)r=e.css(o);else{var s=t;if(s||(s=V(e)),void 0===D.cssobj.obj[s])return"";r=D.cssobj.obj[s][o]}return r?r.replace(/url\(['"]?|['"]?\)/g,""):"";case W.img_src:var i=e.attr(o);return void 0===i&&(i=""),i}}function G(e,t,a,o){a||(a=e.width()),o||(o=e.height());a-=a%10,o-=o%10;var r="";try{var s=new Date;r=s.getDate()+s.getMonth()+s.getFullYear()}catch(e){}return"fast_background_cached_url_"+a+"x"+o+"_"+t+"_"+r}function K(e,t){if(J){var a=e[0].getBoundingClientRect();return a.top<o&&(a.top||a.height)||e.hasClass("fb_ignore_io")}return!x||r[t||V(e)]||e.hasClass("fb_ignore_io")}function H(e,t,a,o,r,s,i,n){function l(){U.del(s),a.removeClass("fb_loaded"),a.data("fb_before_error",!0),N()}if(t){if(c(t))t&&!i&&U.set(s,t);else{var d="tmp_width"+(o?"_c_"+r:""),_="tmp_height"+(o?"_c_"+r:"");a.removeData(d),a.removeData(_)}K(a,o)?(a.hasClass("fb_ev_img_cache_url")&&a.trigger("fb_ev_img_cache_url",[t]),a.data("fb_before_error")&&(t+="?is_retry=1"),u(t,function(){$(t,a,o,!1,n)},l)):n||N()}else l()}function g(e){return!r[e]&&(r[e]=!0)}function f(e,t,a){(t=t.replace(" !important",""))&&D.clear_urls_pattern&&(t=t.replace(D.clear_urls_pattern,"")),t=t.split(":")[0],t+=":"+e.data("fb_img_type");var o=G(e,t),r=U.get(o);!r||e.hasClass("fb_loaded")&&e.data("fb_last_load_url")===r?x&&x.unobserve(e[0]):(D.ajax_is_work++,e.data("fb_before_error")&&(r+="?is_retry=1"),u(r,function(){x&&x.unobserve(e[0]),$(r,e,a)},function(){e.removeClass("fb_loaded"),e.data("fb_before_error",!0),U.del(o),N()}))}}();