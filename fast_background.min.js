/**
 * @overview FastBackground https://github.com/showyweb/FastBackground
 * @version 5.2.6
 * @author  Novojilov Pavel Andreevich (The founder of the library)
 * @license MIT license. http://www.opensource.org/licenses/mit-license.php
 * @copyright (c) 2017 Pavel Novojilov
 */
!function(){function e(e){return!/(\/(m_)?def_|^data:)/.test(e)}function a(e,a,t){if(b>=_.max_ajax_post_stream)setTimeout(arguments.callee.bind(this,e,a,t),100);else{b++,_.is_debug_pws&&(console.log("ajax begin"),console.log("pws "+b));c.post(_.ajax_url.replace(window.location.hash,""),e,function(e){if(b--,_.is_debug_pws&&(console.log("ajax end"),console.log("pws "+b)),!g){var o="<->ajax_complete<->";if(e.substring(e.length-o.length)!==o)return t?t(e):console.error("ERROR POST AJAX: "+e),void a(null);e=e.substring(0,e.length-o.length),a&&a(e)}}).fail(function(o,s,r){b--,_.is_debug_pws&&(console.error("ajax fail"),console.log("pws "+b)),g||(t?t("ERROR POST AJAX: <div style='white-space: pre-wrap; word-wrap:break-word;'>"+window.location.href+" "+(c.toJSON?c.toJSON(e):"")+"</div><br>ERROR TEXT: "+r):console.error("ERROR POST AJAX: "+r),a(null))})}}function t(e,a,t,o){if(!o){if(!e)return void(t&&t(e));B.push([e,a,t])}var s=b>=_.max_ajax_post_stream;if(s&&null===O&&(O=setInterval(arguments.callee.bind(this,null,null,null,!0),10)),!s&&B.length){var r=B[0];e=r[0],a=r[1],t=r[2],B.splice(0,1),B.length||(clearInterval(O),O=null),b++,_.is_debug_pws&&(console.warn("load_img "+e),console.log("pws "+b));var i=new Image;i.onload=function(){b--,_.is_debug_pws&&(console.log("loaded_img "+e),console.log("pws "+b)),a&&a(e)},i.onerror=function(a){return b--,_.is_debug_pws&&(console.log("img on error "+e),console.log("pws "+b)),a.preventDefault(),a.stopPropagation(),t&&t(),!1},i.src=e,B.length&&arguments.callee.apply(this,null,null,null,!0)}}function o(e,a){var t=e.attr("id");if(t&&(t="#"+t),t||(t=e.is("body")?"fb_body":"fb_"+Math.random().toString(36).substr(2,9),e.attr("id",t),t="#"+t),a){t=t+(0===a.indexOf(":")?"":" ")+a}return t=_.prepare_selector_hook(t)}function s(a,t,s,r,i,n){_.is_debug_pws&&console.log("set_f-"+a),e(a)&&(t.hasClass("fb_loaded")&&(t.removeClass("fb_loaded"),t.addClass("fb_dynamic_url")),t.hasClass("fb_dynamic_url")||i||n||t.addClass("fb_loaded"),t.data("fb_last_load_url",a));var l=t&&t.is("img")?v.img_src:v.b_url;try{switch(l){case v.b_url:var d=s;d?c(d).css(l,""):(t[0].style[l]="",d=o(t)),void 0===_.cssobj.obj[d]&&(_.cssobj.obj[d]={});var g=!g&&-1!==h.indexOf(d),f="url("+a+")"+(g?" !important":"");_.cssobj.obj[d][l]&&_.cssobj.obj[d][l]!==f&&(!0,_.cssobj.obj[d][l]="none",_.cssobj.obj[d].backgroundImage="none",r||_.cssobj.update()),_.cssobj.obj[d][l]=f,_.cssobj.obj[d].backgroundImage=f,r||_.cssobj.update();break;case v.img_src:t.attr(l)!==a&&t.attr(l,a),x(function(){var e=c(window).width(),a=t.width();(e>500&&a>e||u.isMobile.anyPhone&&a<10)&&t.css("width","100%")},t[0])}!i&&t.hasClass("fb_ev_img_load")&&t.trigger("fb_ev_img_load",[a])}catch(e){console.warn(e.message)}i||k()}function r(e,a,t,o){t||(t=e.width()),o||(o=e.height());return"fast_background_cached_url_"+(t-=t%10)+"x"+(o-=o%10)+"_"+a}function i(e,a){if(m){var t=e[0].getBoundingClientRect();return t.top<A&&(t.top||t.height)||e.hasClass("fb_ignore_io")}return!z||C[a||o(e)]||e.hasClass("fb_ignore_io")}function n(a,o,r,n,l,d,_){function c(){j.del(d),r.removeClass("fb_loaded"),r.data("fb_before_error",!0),k()}if(o){if(o&&!/(^data:)/.test(o)&&!_&&e(o)&&j.set(d,o),!e(o)){var u="tmp_width"+(n?"_c_"+l:""),g="tmp_height"+(n?"_c_"+l:"");r.removeData(u),r.removeData(g)}i(r,n)?(r.hasClass("fb_ev_img_cache_url")&&r.trigger("fb_ev_img_cache_url",[o]),r.data("fb_before_error")&&(o+="?is_retry=1"),t(o,function(){s(o,r,n)},c)):k()}else c()}function l(e){return!C[e]&&(C[e]=!0,!0)}function d(e,a,o){(a=a.replace(" !important",""))&&_.clear_urls_pattern&&(a=a.replace(_.clear_urls_pattern,"")),a=a.split(":")[0],a+=":"+e.data("fb_img_type");var i=r(e,a),n=j.get(i);!n||e.hasClass("fb_loaded")&&e.data("fb_last_load_url")===n?z&&z.unobserve(e[0]):(_.ajax_is_work++,e.data("fb_before_error")&&(n+="?is_retry=1"),t(n,function(){z&&z.unobserve(e[0]),s(n,e,o)},function(){e.removeClass("fb_loaded"),e.data("fb_before_error",!0),j.del(i),k()}))}if(-1===window.location.host.indexOf("yandex.net")){var _={resize_event:!0,ajax_url:window.location.href,max_ajax_post_stream:8,ajax_is_work:0,update_is_worked:!1,stage_loaded:-1,timeout_size:50,cssobj:null,is_debug_pws:!1,use_local_storage:!0,clear_urls_pattern:"",prepare_selector_hook:function(e){return e},update:function(e,t,l){if(null===u&&function(){u={isMobile:{Android:!!navigator.userAgent.match(/Android/i),BlackBerry:!!navigator.userAgent.match(/BlackBerry|BB/i),iOS:!!navigator.userAgent.match(/iPhone|iPad|iPod/i),Windows:!!navigator.userAgent.match(/IEMobile/i)},isLocalStorageSupported:!1,isSessionStorageSupported:!1};try{u.isLocalStorageSupported="undefined"!=typeof localStorage,u.isSessionStorageSupported="undefined"!=typeof sessionStorage}catch(e){console.log(e.message)}if(u.isSessionStorageSupported)try{sessionStorage.setItem("test_sessionStorage",1),sessionStorage.removeItem("test_sessionStorage")}catch(e){u.isLocalStorageSupported=!1,u.isSessionStorageSupported=!1}u.isMobile.any=u.isMobile.Android||u.isMobile.BlackBerry||u.isMobile.iOS||u.opera_mini||u.isMobile.Windows,u.isMobile.anyPhone=!!u.isMobile.any&&(!!navigator.userAgent.match(/iphone|ipod/i)||u.isMobile.Android&&!!navigator.userAgent.match(/mobile/i)||u.isMobile.BlackBerry&&!navigator.userAgent.match(/tablet/i)||u.isMobile.Windows),u.isRetinaDisplay=function(){c("head").append('<style id="FB_BS" type="text/css"> .FB_BS_is_retina {display: none; opacity: 0; } @media only screen and (-Webkit-min-device-pixel-ratio: 1.5), only screen and (-moz-min-device-pixel-ratio: 1.5), only screen and (-o-min-device-pixel-ratio: 3 / 2), only screen and (min-device-pixel-ratio: 1.5), only screen and (-webkit-min-device-pixel-ratio: 3) {.FB_BS_is_retina {opacity: 1; }} </style>');var e=c("<div id='test_FB_BS' class='FB_BS_is_retina'></div>");c("body").append(e);var a=1==e.css("opacity");return e.remove(),c("#FB_BS").remove(),a}(),u.isWebpSupport=function(){var e="object"==typeof document?document.createElement("canvas"):{};e.width=e.height=1;var a=!!e.toDataURL&&5===e.toDataURL("image/webp").indexOf("image/webp");if(a)return a;var t=new Image,o=function(e){u.isWebpSupport=!(!e||"load"!==e.type)&&1===t.width};return t.onerror=o,t.onload=o,t.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==",-1}()}(),(_.update_is_worked||-1!==_.stage_loaded&&!I||-1===u.isWebpSupport)&&!y)return e&&p.push(e),clearTimeout(f),void(f=setTimeout(arguments.callee.bind(this,null,t),_.timeout_size));switch(y=!1,_.update_is_worked=!0,_.stage_loaded){case-1:_.stage_loaded=0;break;case 3:_.stage_loaded=1}_.is_debug_pws&&console.warn("fb.stage_loaded "+_.stage_loaded),b=0,_.is_debug_pws&&console.log("pws set "+b),g=!1,null===_.cssobj&&(_.cssobj=cssobj({})),k=null,k=function(){if(_.ajax_is_work--,_.is_debug_pws&&console.log("ajax_is_work "+_.ajax_is_work),_.ajax_is_work<1)if(_.stage_loaded<2)_.stage_loaded<1?(_.cssobj.update(),_.stage_loaded=1,z||(m=!1,I=!0)):_.stage_loaded=2,y=!0,_.update(e,t,l);else{_.stage_loaded=3,e&&e();for(var a=0;a<p.length;a++)p[a]();p=[],_.update_is_worked=!1}};var d=[],A=c(".fast_background:not(.fb_loaded)").toArray(),x=[];for(O=0;O<A.length;O++)x.push(c(A[O]));A=x,x=null;var B,O;for(O=0;O<A.length;O++){var C=o(B=A[O]);if(d.push(B),(!B.data("is_fb_observed")||B.attr("data-url")&&!B.data("fb_sel"))&&(B.data("is_fb_observed",!0),B.data("fb_sel",C),z&&z.observe(B[0])),!B.is_fb_class&&R.all_exist(B)){var M=R.get_all(B);for(var D in M)if(M.hasOwnProperty(D)){var E=M[D];C=o(B,D);var Q=c(C.replace(":hover","").replace(":active","").replace(":focus",""));if(Q.length>0){for(var L=0;L<1;L++){var P=Q.eq(L);P.data("is_fb_observed")||P.data("is_fb_observed",!0),z&&z.observe(P[0]);var W=null;P.data("fb_sels")?W=P.data("fb_sels"):(W={},P.data("fb_sels",W)),W[C]=!0}var F=Q.eq(0)}d.push({is_fb_class:!0,first_elem:F,url:E,fb_selector:C})}}}if(_.ajax_is_work=d.length,_.ajax_is_work<1)return _.update_is_worked=!1,_.stage_loaded=-1,void(e&&e());var T=[];for(O=0;O<d.length;O++)!function(e){var d=null,g=null,f=null,b=!1,p=null;if(e.is_fb_class){if(b=!0,p=B.first_elem,f=e.url,d=e.fb_selector,g=d?d.replace(/ |>|\*|\(|\)|\+|\@/gi,"_"):"",!(e=e.first_elem))return void k()}else f=e.attr("data-url"),d=null;if(f){_.clear_urls_pattern&&(f=f.replace(_.clear_urls_pattern,""));var A=f.split(":");f=A[0],A[1]||(A[1]=null);var y=S[A[1]]?S[A[1]]:0;0===y&&(y=S.webp),y!==S.webp||u.isWebpSupport||(y=0);var x=e.is("img")?v.img_src:v.b_url;if(x===v.b_url){var O=d;if(O||(O=o(e)),void 0===_.cssobj.obj[O]||void 0===_.cssobj.obj[O][x]){_.cssobj.obj[O]={};-1!==f.indexOf(" !important")&&h.push(O)}f=f.replace(" !important","")}x!==v.img_src||e.attr("src")||e.attr("src",w);var R,C,I,z=null;R=e.width(),C=e.height(),e.data("fb_img_type",y),I=r(e,f+":"+y,R,C),_.is_debug_pws&&console.log("cached_key: "+I);var M=/(jpe?g|png|webp)$/i.test(f);if(!l||!M){var D=!1;if((z=j.get(I))||M||(z=f),_.stage_loaded<1&&(!z||!M)&&m){var E=f+":"+y;!_.fast_cache[E]&&M||(M&&(z=_.fast_cache[E]),D=!0,i(e,d)&&s(z,e,d,!0,!0))}if(z)return void(_.stage_loaded<1&&!D?i(e,d)?s(z,e,d,!0,!1,!0):k():n(0,z,e,d,g,I,!0))}0===e.length&&(e=c(d.replace(/(\:| ).*$/gi,"")));var Q=!1,L=x===v.img_src?"cover":e.css("background-size");b&&0===p.length&&(L="contain"),"cover"===L&&(Q=!0);var P=null;if("cover"!==L&&"contain"!==L){var W=/^(|(\d*)(px|%|auto)) (|(\d*)(px|%|auto))$/i,F=L.match(W);null==F&&(W=/^(|(\d*)(px|%|auto))$/i,F=L.match(W));var J=!1,U=!1;null!=F&&(P=e,F[3]&&"auto"!==F[3].toLowerCase()?(R=parseInt(F[2]),"%"===F[3].toLowerCase()&&(R>=100&&(Q=!0),R=P.width()/100*R,R+=10)):J=!0,7===F.length&&F[6]&&"auto"!==F[6].toLowerCase()?(C=parseInt(F[5]),"%"===F[6].toLowerCase()&&(C>=100&&(Q=!0),C=P.height()/100*C,C+=10)):(7===F.length||J)&&(U=!0)),J&&U?(R=c(window).width(),C=c(window).height()):(J||U)&&(Q=!0)}else if(x===v.img_src&&-1!==[R,C].indexOf(1))for(P=e.parent();;){if(1===R&&(R=P.width()),1===C&&(C=P.height()),1!==R&&1!==C)break;P=P.parent()}Q=Q?1:0;var q=_.stage_loaded>=1?_.stage_loaded>=2?0:1:2;if(u.isRetinaDisplay&&(R*=2,C*=2),!l){var N="tmp_width"+(b?"_c_"+g:""),V="tmp_height"+(b?"_c_"+g:""),X=parseInt(e.data(N));X||(X=0);var $=parseInt(e.data(V));if($||($=0),R<=X&&C<=$&&!e.hasClass("fb_dynamic_url")&&(z=function(e,a){var t=e.is("img")?v.img_src:v.b_url;switch(t){case v.b_url:var s=a;if(s||(s=o(e)),void 0===_.cssobj.obj[s])return"";var r=_.cssobj.obj[s][t];return r?r.replace(/url\(['"]?|['"]?\)/g,""):"";case v.img_src:var i=e.attr(t);return void 0===i&&(i=""),i}}(e,d),z=z.replace(" !important","")))return void n(0,z,e,d,g,I,!0);_.stage_loaded>=1&&(R>X?e.data(N,R):R=X,C>$?e.data(V,C):C=$)}if(R||C){var G=R+"x"+C;b&&0===p.length&&(e=p),_.stage_loaded<2?T.push({img_obj:e,fb_selector:d,fb_tmp_attr_p:g,cached_key:I,web_url:f,cover_size:Q,cont_size:G,def_size:q,end_type:y}):a({fast_background:"get_cached_url",web_url:f,cover_size:Q,cont_size:G,def_size:q,end_type:y},function(a){n(0,a,e,d,g,I)},t)}else k()}else k()}(B=d[O].is_fb_class?d[O]:c(d[O]));if(m&&_.cssobj.update(),_.stage_loaded<2&&T.length){for(var J={web_url:"",cover_size:"",cont_size:"",def_size:"",end_type:""},U=function(e,a){J[a]+=T[e][a]+":"},q=0;q<T.length;q++)for(var N in J)J.hasOwnProperty(N)&&U(q,N);J.fast_background="get_cached_urls",a(J,function(e){if(e){e=e.split(":");for(var a=0;a<T.length;a++)n(T[a].url,e[a],T[a].img_obj,T[a].fb_selector,T[a].fb_tmp_attr_p,T[a].cached_key)}},t)}}},c=jQuery;_=c.extend(fast_background,_);var u=null,g=!1,f=null,b=0,p=[],v={b_url:"background-image",img_src:"src"},h=[],w="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",m=!0,A=c(window).height(),j={data:{},get:function(e){return!this.data[e]&&u.isLocalStorageSupported&&(this.data[e]=localStorage.getItem(e)),this.data[e]},set:function(e,a){this.data[e]=a,u.isLocalStorageSupported&&_.use_local_storage&&localStorage.setItem(e,a)},del:function(e){this.data[e]&&(delete this.data[e],u.isLocalStorageSupported&&localStorage.removeItem(e))}},y=!1,S={jpg:2,png:3,webp:18};c(function(){c(window).on("beforeunload.fast_background",function(e){g=!0});var e=c(window).width();c(window).resize(function(){if(!_.resize_event)return!0;var a=c(window).width();_.stage_loaded<2||u.isMobile.any&&e===a||-1===window.location.host.indexOf("yandex.net")&&(c(".fb_loaded").removeClass("fb_loaded"),e=c(window).width(),_.update())}),c(document).on("scroll mousemove touchstart",function(e){m&&_.stage_loaded>0&&(m=!1,_.is_debug_pws&&console.warn("load_only_visible set false"),fast_background.update())})});var x=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,a){window.setTimeout(e,1e3/60)},k=null,B=[],O=null,R={get_all:function(e){var a=e.attr("data-urls");return void 0===a?{}:(a=a.replace(/'/gi,'"'),a=c.parseJSON(a))},get:function(e,a){return this.get_all(e)[a]},set_all:function(e,a){var t=c.toJSON(a);t=t.replace(/\"/gi,"'"),e.attr("data-urls",t),isEmptyObject(a)&&this.del_all(e)},set:function(e,a,t){var o=this.get_all(e);o[a]=t,this.set_all(e,o)},del_all:function(e){e.removeAttr("data-urls")},del:function(e,a){var t=this.get_all(e);delete t[a],this.set_all(e,t)},all_exist:function(e){return void 0!==e.attr("data-urls")}},C={},I=!1,z="IntersectionObserver"in window?new IntersectionObserver(function(e){if(m)setTimeout(arguments.callee.bind(this,e),300);else{I=!0;for(var a in e){var t=e[a];if(t.isIntersecting){var o=c(t.target),s=o.data("fb_sel"),r=null;s&&l(s)&&(r=o.attr("data-url"))&&d(o,r);var i=o.data("fb_sels");if(i)for(s in i)if(l(s)){var n=s.split(/(?=[: ])/g),_=n[0];n[0]="";var u=n.join("");" "===u.substr(0,1)&&(u=u.substr(1));var g=o.closest(_);d(o,r=R.get(g,u),s)}}}}},{rootMargin:"0px 1000px "+(A+A/2)+"px 1000px"}):null}}();