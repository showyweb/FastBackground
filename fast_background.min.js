/**
 * Name:    FastBackground
 * Version: 1.3.3
 * Author:  Novojilov Pavel Andreevich
 * Support: https://github.com/showyweb/FastBackground
 * License: MIT license. http://www.opensource.org/licenses/mit-license.php
 * Copyright (c) 2017 Pavel Novojilov
 */
var fast_background={_timeout:null,timeout_size:0,cssobj:null,prepare_selector_hook:function(e){return e},resize_event:!0,ajax_url:window.location.href,max_ajax_post_stream:8,_page_unloaded:!1,_fix_old_browsers:!1,_ajax_is_work:0,_p_post_ajax_work_streams:0,_last_update_callbacks:[],_types:{b_url:"background-image",img_src:"src"},is_init:!1,ajax_is_work:0,_only_w_loaded:!1,update:function(e,t,i){function a(e,t,i){if(f._p_post_ajax_work_streams>=f.max_ajax_post_stream)setTimeout(arguments.callee.bind(this,e,t,i),100);else{f._p_post_ajax_work_streams++;p.post(f.ajax_url.replace(window.location.hash,""),e,function(e){if(f._p_post_ajax_work_streams--,!f._page_unloaded){var a="<->ajax_complete<->";if(e.substring(e.length-a.length)!==a)return i?i(e):console.log("ERROR POST AJAX: "+e),void t(null);e=e.substring(0,e.length-a.length),t&&t(e)}}).fail(function(a,o,r){f._p_post_ajax_work_streams--,f._page_unloaded||(i?i("ERROR POST AJAX: <div style='white-space: pre-wrap; word-wrap:break-word;'>"+window.location.href+" "+(p.toJSON?p.toJSON(e):"")+"</div><br>ERROR TEXT: "+r):console.log("ERROR POST AJAX: "+r),t(null))})}}function o(e,t){var i=e.attr("id");if(i&&(i="#"+i),i||(i=e.is("body")?"fb_body":"fb_"+Math.random().toString(36).substr(2,9),e.attr("id",i),i="#"+i),t){i=i+(0===t.indexOf(":")?"":" ")+t}return i=f.prepare_selector_hook(i)}function r(){if(f._ajax_is_work--,f._ajax_is_work<1)if(f.is_init){if(e||f._last_update_callbacks.length){e&&e();for(var t=0;t<f._last_update_callbacks.length;t++)f._last_update_callbacks[t]();f._last_update_callbacks=[]}}else f._only_w_loaded?f.is_init=!0:f._only_w_loaded=!0,f.update()}function s(e,t){var i=e.is("img")?f._types.img_src:f._types.b_url;switch(i){case f._types.b_url:var a=t;if(a||(a=o(e)),void 0===f.cssobj.obj[a])return"";var r=f.cssobj.obj[a][i];return r?r.replace(/url\(['"]?|['"]?\)/g,""):"";case f._types.img_src:return e.attr(i)}}function n(e,t,i,a){i||(i=e.width()),a||(a=e.height());return"fast_background_cached_url_"+(i-=i%10)+"x"+(a-=a%10)+"_"+t}function _(e,t,i,a,s,n){!function(e,t,i){if(f._p_post_ajax_work_streams>=f.max_ajax_post_stream)setTimeout(arguments.callee.bind(this,e,t,i),100);else if(e){f._p_post_ajax_work_streams++;var a=new Image;a.onload=function(){f._p_post_ajax_work_streams--,t&&t(a.naturalWidth,a.naturalHeight)},a.onerror=function(e){return f._p_post_ajax_work_streams--,e.preventDefault(),e.stopPropagation(),i&&i(),!1},e.indexOf("!important"),a.src=e}else i&&i()}(t,function(e,_){if(SW_BS.browser.isLocalStorageSupported)if(-1===t.indexOf("default_"))localStorage.setItem(n,t);else{var l="tmp_width"+(a?"_c_"+s:""),d="tmp_height"+(a?"_c_"+s:"");i.removeData(l),i.removeData(d)}!function(e,t,i){var a=t.is("img")?f._types.img_src:f._types.b_url;try{switch(a){case f._types.b_url:var s=i;s||(s=o(t)),void 0===f.cssobj.obj[s]&&(f.cssobj.obj[s]={});var n=f.cssobj.obj[s][a]&&-1!==f.cssobj.obj[s][a].indexOf(" !important");n||-1===w.indexOf(s)||(n=!0),f.cssobj.obj[s][a]="url("+e+")"+(n?" !important":""),f.cssobj.update(),n||(f._fix_old_browsers||"none"!==p(s).css("background-image")||(f._fix_old_browsers=!0),f._fix_old_browsers&&(f.cssobj.obj[s].backgroundImage="url("+e+")",f.cssobj.update()));break;case f._types.img_src:t.attr(a,e),c(function(){var e=p(window).width(),i=t.width();(e>500&&i>e||SW_BS.browser.isMobile.anyPhone&&i<10)&&t.css("width","100%")},t[0])}}catch(e){}r()}(t,i,a)},function(){localStorage.removeItem(n),function(e,t){switch(e.is("img")?f._types.img_src:f._types.b_url){case f._types.b_url:var i=t;i||(i=o(e)),void 0===f.cssobj.obj[i]&&(f.cssobj.obj[i]={}),f.cssobj.update();break;case f._types.img_src:}r()}(i,a)})}function l(e){if(!f._only_w_loaded){if((e.is_fb_class?e.first_elem:e).offset().top>g)return}b.push(e)}var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)},d=function(e){var t=e.attr("data-urls");return void 0===t?{}:(t=t.replace(/'/gi,'"'),t=p.parseJSON(t))},u=function(e){return void 0!==e.attr("data-urls")},p=jQuery,f=fast_background,b=[],g=p(window).height();if("undefined"==typeof SW_BS){SW_BS={browser:{isLocalStorageSupported:"undefined"!=typeof localStorage,isMobile:{Android:!!navigator.userAgent.match(/Android/i),BlackBerry:!!navigator.userAgent.match(/BlackBerry|BB/i),iOS:!!navigator.userAgent.match(/iPhone|iPad|iPod/i),Windows:!!navigator.userAgent.match(/IEMobile/i)}}};var m=SW_BS.browser;if(m.isSessionStorageSupported="undefined"!=typeof sessionStorage,m.isSessionStorageSupported)try{sessionStorage.setItem("test_sessionStorage",1),sessionStorage.removeItem("test_sessionStorage")}catch(e){m.isLocalStorageSupported=!1,m.isSessionStorageSupported=!1}m.isMobile.any=m.isMobile.Android||m.isMobile.BlackBerry||m.isMobile.iOS||m.opera_mini||m.isMobile.Windows,m.isMobile.anyPhone=!!m.isMobile.any&&(!!navigator.userAgent.match(/iphone|ipod/i)||m.isMobile.Android&&!!navigator.userAgent.match(/mobile/i)||m.isMobile.BlackBerry&&!navigator.userAgent.match(/tablet/i)||m.isMobile.Windows),p("head").append('<style id="SW_BS" type="text/css"> .SW_BS_is_retina {display: none; opacity: 0; } @media only screen and (-Webkit-min-device-pixel-ratio: 1.5), only screen and (-moz-min-device-pixel-ratio: 1.5), only screen and (-o-min-device-pixel-ratio: 3 / 2), only screen and (min-device-pixel-ratio: 1.5), only screen and (-webkit-min-device-pixel-ratio: 3) {.SW_BS_is_retina {opacity: 1; }} </style>'),m.isRetinaDisplay=function(){if(void 0===p)return!1;if(m.is_error_version||m.isMobile.Android&&m.fullVersion<534||m.isMobile.BlackBerry&&m.fullVersion<537)return!1;p("body").append("<div id='test_SW_BS' class='is_retina'></div>");var e="1"==p("#test_.SW_BS_is_retina").css("opacity");return p("#test_SW_BS").remove(),p("#SW_BS").remove(),e}()}if(-1===window.location.host.indexOf("yandex.net")){var w=[];if(f._p_post_ajax_work_streams=0,0===f.timeout_size&&(f.timeout_size=1e3),f._ajax_is_work>0)return e&&f._last_update_callbacks.push(e),clearTimeout(f._timeout),void(f._timeout=setTimeout(arguments.callee.bind(this,null,t),f.timeout_size));f._page_unloaded=!1,null===f.cssobj&&(f.cssobj=cssobj({}));var h=p(".fast_background").toArray();h.length<1&&e&&e();var v,S;for(S=0;S<h.length;S++)l(v=h[S].is_fb_class?h[S]:p(h[S])),function(e){var t=null;if(!e.is_fb_class&&u(e)){var i=d(e);for(var a in i)if(i.hasOwnProperty(a)){var r=i[a];t=o(e,a);var s=p(t.replace(":hover","").replace(":active","").replace(":focus",""));s.length>0&&(s=s.eq(0)),l({is_fb_class:!0,first_elem:s,url:r,fb_selector:t})}}}(v);f._ajax_is_work=b.length;var y=[];for(S=0;S<b.length;S++)!function(e){var r=null,l=null,c=null,d=!1,u=null;if(e.is_fb_class)d=!0,u=v.first_elem,c=e.url,r=e.fb_selector,l=r?r.replace(/ |>|\*|\(|\)|\+|\@/gi,"_"):"",e=e.first_elem;else{if(!(c=e.attr("data-url")))return void f._ajax_is_work--;r=null}var b=e.is("img")?f._types.img_src:f._types.b_url;if(b===f._types.b_url){var g=r;if(g||(g=o(e)),void 0===f.cssobj.obj[g]||void 0===f.cssobj.obj[g][b]){f.cssobj.obj[g]={};-1!==c.indexOf(" !important")&&w.push(g)}c=c.replace(" !important","")}b!==f._types.img_src||e.attr("src")||e.attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=");var m=null,h=e.width(),S=e.height(),j=n(e,c,h,S);if(SW_BS.browser.isLocalStorageSupported&&!i&&(m=localStorage.getItem(j)))_(0,m,e,r,l,j);else{0===e.length&&(e=p(r.replace(/(\:| ).*$/gi,"")));var A="false",k=e.is("img")?"cover":e.css("background-size");if(d&&0===u.length&&(k="contain"),"cover"===k&&(A="true"),"cover"!==k&&"contain"!==k){var x=/^(|(\d*)(px|%|auto)) (|(\d*)(px|%|auto))$/i,B=k.match(x);null==B&&(x=/^(|(\d*)(px|%|auto))$/i,B=k.match(x));var O=!1,W=!1;if(null!=B){var R=e;b===f._types.img_src&&(R=e.parent()),"auto"!==B[3].toLowerCase()?(h=parseInt(B[2]),"%"===B[3].toLowerCase()&&(h>=100&&(A="true"),h=R.width()/100*h)):O=!0,7===B.length&&"auto"!==B[6].toLowerCase()?(S=parseInt(B[5]),"%"===B[6].toLowerCase()&&(S>=100&&(A="true"),S=R.height()/100*S)):(7===B.length||O)&&(W=!0)}O&&W&&(h=p(window).width(),S=p(window).height())}if(SW_BS.browser.isRetinaDisplay&&(h*=2,S*=2),h+=150,S+=150,!i){var z="tmp_width"+(d?"_c_"+l:""),M="tmp_height"+(d?"_c_"+l:""),I=parseInt(e.data(z));I||(I=0);var P=parseInt(e.data(M));if(P||(P=0),h<=I&&S<=P)return m=s(e,r),m=m.replace(" !important",""),void _(0,m,e,r,l,j);h>I?e.data(z,h):h=I,S>P?e.data(M,S):S=P}var T=h+"x"+S;d&&0===u.length&&(e=u),f.is_init?a({fast_background:"get_cached_url",web_url:c,cover_size:A,cont_size:T,other_size:f.is_init||b===f._types.img_src?"false":"true"},function(t){_(0,t,e,r,l,j)},t):y.push({img_obj_:e,fb_selector:r,fb_tmp_attr_p:l,cached_key:j,web_url:c,cover_size:A,cont_size:T,other_size:f.is_init||b===f._types.img_src?"false":"true"})}}(v=b[S].is_fb_class?b[S]:p(b[S]));if(!f.is_init){for(var j={web_url:"",cover_size:"",cont_size:"",other_size:""},A=function(e,t){j[t]+=y[e][t]+"\n"},k=0;k<y.length;k++)for(var x in j)j.hasOwnProperty(x)&&A(k,x);j.fast_background="get_cached_urls",a(j,function(e){e=e.split("\n");for(var t=0;t<y.length;t++)_(y[t].url,e[t],y[t].img_obj_,y[t].fb_selector,y[t].fb_tmp_attr_p,y[t].cached_key)},t)}}}};!function(){var e=jQuery;e(function(){e(window).on("beforeunload.fast_background",function(e){fast_background._page_unloaded=!0});var t=e(window).width();e(window).resize(function(){if(!fast_background.resize_event)return!0;var i=e(window).width();SW_BS.browser.isMobile.any&&t===i||!fast_background.is_init||-1===window.location.host.indexOf("yandex.net")&&(t=e(window).width(),fast_background.update())})})}();