/**
 * @overview FastBackground https://github.com/showyweb/FastBackground
 * @version 5.3.9
 * @author  Novojilov Pavel Andreevich (The founder of the library)
 * @license MIT license. http://www.opensource.org/licenses/mit-license.php
 * @copyright (c) 2017 Pavel Novojilov
 */
!function(){if(-1===window.location.host.indexOf("yandex.net")){var E={resize_event:!0,ajax_url:window.location.href,max_ajax_post_stream:3,ajax_is_work:0,update_is_worked:!1,stage_loaded:-1,timeout_size:50,cssobj:null,is_debug_pws:!1,use_local_storage:!0,clear_urls_pattern:"",prepare_selector_hook:function(e){return e},update:function(a,z,I){if(null===T&&function(){T={isMobile:{Android:!!navigator.userAgent.match(/Android/i),BlackBerry:!!navigator.userAgent.match(/BlackBerry|BB/i),iOS:!!navigator.userAgent.match(/iPhone|iPad|iPod/i),Windows:!!navigator.userAgent.match(/IEMobile/i)},isLocalStorageSupported:!1,isSessionStorageSupported:!1};try{T.isLocalStorageSupported="undefined"!=typeof localStorage,T.isSessionStorageSupported="undefined"!=typeof sessionStorage}catch(e){console.log(e.message)}if(T.isSessionStorageSupported)try{sessionStorage.setItem("test_sessionStorage",1),sessionStorage.removeItem("test_sessionStorage")}catch(e){T.isLocalStorageSupported=!1,T.isSessionStorageSupported=!1}T.isMobile.any=T.isMobile.Android||T.isMobile.BlackBerry||T.isMobile.iOS||T.opera_mini||T.isMobile.Windows,T.isMobile.anyPhone=!!T.isMobile.any&&(!!navigator.userAgent.match(/iphone|ipod/i)||T.isMobile.Android&&!!navigator.userAgent.match(/mobile/i)||T.isMobile.BlackBerry&&!navigator.userAgent.match(/tablet/i)||T.isMobile.Windows),T.isRetinaDisplay=function(){Q("head").append('<style id="FB_BS" type="text/css"> .FB_BS_is_retina {display: none; opacity: 0; } @media only screen and (-Webkit-min-device-pixel-ratio: 1.5), only screen and (-moz-min-device-pixel-ratio: 1.5), only screen and (-o-min-device-pixel-ratio: 3 / 2), only screen and (min-device-pixel-ratio: 1.5), only screen and (-webkit-min-device-pixel-ratio: 3) {.FB_BS_is_retina {opacity: 1; }} </style>');var e=Q("<div id='test_FB_BS' class='FB_BS_is_retina'></div>");Q("body").append(e);var a=1==e.css("opacity");return e.remove(),Q("#FB_BS").remove(),a}(),T.isWebpSupport=function(){var e="object"==typeof document?document.createElement("canvas"):{};e.width=e.height=1;var a=!!e.toDataURL&&5===e.toDataURL("image/webp").indexOf("image/webp");if(a)return a;var t=new Image,o=function(e){T.isWebpSupport=!(!e||"load"!==e.type)&&1===t.width};return t.onerror=o,t.onload=o,t.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA==",-1}()}(),(E.update_is_worked||-1!==E.stage_loaded&&!x||-1===T.isWebpSupport)&&!y)return a&&j.push(a),clearTimeout(m),void(m=setTimeout(arguments.callee.bind(this,null,z),E.timeout_size));switch(y=!1,E.update_is_worked=!0,E.stage_loaded){case-1:case 3:E.stage_loaded=0}E.is_debug_pws&&console.warn("fb.stage_loaded "+E.stage_loaded),A=0,E.is_debug_pws&&console.log("pws set "+A),w=!1,null===E.cssobj&&(E.cssobj=cssobj({})),q=null,q=function(){if(E.ajax_is_work--,E.is_debug_pws&&console.log("ajax_is_work "+E.ajax_is_work),E.ajax_is_work<1)if(E.stage_loaded<2)E.stage_loaded<1?(E.cssobj.update(),E.stage_loaded=1,k||(x=!(P=!1))):E.stage_loaded=2,y=!0,E.update(a,z,I);else{E.stage_loaded=3,a&&a();for(var e=0;e<j.length;e++)j[e]();j=[],E.update_is_worked=!1}};var M,e,t=[],o=Q(".fast_background:not(.fb_loaded)").toArray(),s=[];for(e=0;e<o.length;e++)s.push(Q(o[e]));for(o=s,s=null,e=0;e<o.length;e++){var r=V(M=o[e]);if(t.push(M),(!M.data("is_fb_observed")||M.attr("data-url")&&!M.data("fb_sel"))&&(M.data("is_fb_observed",!0),M.data("fb_sel",r),k&&k.observe(M[0])),!M.is_fb_class&&S.all_exist(M)){var i=S.get_all(M);for(var n in i)if(i.hasOwnProperty(n)){var l=i[n];r=V(M,n);var _=Q(r.replace(":hover","").replace(":active","").replace(":focus",""));if(0<_.length){for(var d=0;d<1;d++){var c=_.eq(d);c.data("is_fb_observed")||c.data("is_fb_observed",!0),k&&k.observe(c[0]);var u=null;c.data("fb_sels")?u=c.data("fb_sels"):(u={},c.data("fb_sels",u)),u[r]=!0}var g=_.eq(0)}t.push({is_fb_class:!0,first_elem:g,url:l,fb_selector:r})}}}if(E.ajax_is_work+=t.length,E.ajax_is_work<1)return E.update_is_worked=!1,E.stage_loaded=-1,void(a&&a());var f,b,D=[];for(e=0;e<t.length;e++)!function(a){var t=null,o=null,s=null,e=!1,r=null;if(a.is_fb_class){if(e=!0,r=M.first_elem,s=a.url,t=a.fb_selector,o=t?t.replace(/ |>|\*|\(|\)|\+|\@/gi,"_"):"",!(a=a.first_elem))return q()}else s=a.attr("data-url"),t=null;if(X(s)){E.clear_urls_pattern&&(s=s.replace(E.clear_urls_pattern,""));var i=s.split(":");s=i[0],i[1]||(i[1]=null);var n=U[i[1]]?U[i[1]]:0;0===n&&(n=U.webp),n!==U.webp||T.isWebpSupport||(n=0);var l=a.is("img")?W.img_src:W.b_url;if(l===W.b_url){var _=t;if(_||(_=V(a)),void 0===E.cssobj.obj[_]||void 0===E.cssobj.obj[_][l])E.cssobj.obj[_]={},-1!==s.indexOf(" !important")&&F.push(_);s=s.replace(" !important","")}l!==W.img_src||a.attr("src")||a.attr("src",L);var d,c,u,g=null;d=a.width(),c=a.height(),a.data("fb_img_type",n),u=G(a,s+":"+n,d,c),E.is_debug_pws&&console.log("cached_key: "+u);var f=/\.(jpe?g|png|webp)$/i.test(s);if(f||J.set(u,s),!I||!f){g=J.get(u);var b=!1;if(E.stage_loaded<1&&(!g||!f)&&P&&T.isWebpSupport){var p=s+":"+n;if((E.fast_cache[p]||!f)&&(f&&(g=E.fast_cache[p]),b=!0,K(a,t))){var v=Y(a,t,!0);X(v)?a.hasClass("fb_ev_img_load")&&a.trigger("fb_ev_img_load",[v]):$(g,a,t,!0,!0)}}if(g)return E.stage_loaded<1&&!b?K(a,t)?X(Y(a,t,!0))?H(s,g,a,t,o,u,!0):$(g,a,t,!0,!1,!0):q():H(s,g,a,t,o,u,!0)}0===a.length&&(a=Q(t.replace(/(\:| ).*$/gi,"")));var h=!1,w=l===W.img_src?"cover":a.css("background-size");e&&0===r.length&&(w="contain"),"cover"===w&&(h=!0);var m=null;if("cover"!==w&&"contain"!==w){var A=/^(|(\d*)(px|%|auto)) (|(\d*)(px|%|auto))$/i,j=w.match(A);null==j&&(A=/^(|(\d*)(px|%|auto))$/i,j=w.match(A));var y=!1,S=!1;null!=j&&(m=a,j[3]&&"auto"!==j[3].toLowerCase()?(d=parseInt(j[2]),"%"===j[3].toLowerCase()&&(100<=d&&(h=!0),d=m.width()/100*d,d+=10)):y=!0,7===j.length&&j[6]&&"auto"!==j[6].toLowerCase()?(c=parseInt(j[5]),"%"===j[6].toLowerCase()&&(100<=c&&(h=!0),c=m.height()/100*c,c+=10)):(7===j.length||y)&&(S=!0)),y&&S?(d=Q(window).width(),c=Q(window).height()):(y||S)&&(h=!0)}else if(l===W.img_src&&-1!==[d,c].indexOf(1))for(m=a.parent();1===d&&(d=m.width()),1===c&&(c=m.height()),1===d||1===c;)m=m.parent();h=h?1:0;var x=1<=E.stage_loaded?2<=E.stage_loaded?0:1:2;if(T.isRetinaDisplay&&(d*=2,c*=2),!I){var k="tmp_width"+(e?"_c_"+o:""),B="tmp_height"+(e?"_c_"+o:""),O=parseInt(a.data(k));O||(O=0);var R=parseInt(a.data(B));if(R||(R=0),d<=O&&c<=R&&!a.hasClass("fb_dynamic_url")&&X(g=(g=Y(a,t)).replace(" !important","")))return H(s,g,a,t,o,u,!0);1<=E.stage_loaded&&(O<d?a.data(k,d):d=O,R<c?a.data(B,c):c=R)}if(d||c){var C=d+"x"+c;e&&0===r.length&&(a=r),E.stage_loaded<2?D.push({img_obj:a,fb_selector:t,fb_tmp_attr_p:o,cached_key:u,web_url:s,cover_size:h,cont_size:C,def_size:x,end_type:n}):N({fast_background:"get_cached_url",web_url:s,cover_size:h,cont_size:C,def_size:x,end_type:n},function(e){H(s,e,a,t,o,u)},z)}else q()}else q()}(M=t[e].is_fb_class?t[e]:Q(t[e]));if(P&&E.cssobj.update(),E.stage_loaded<2&&D.length){for(var p={web_url:"",cover_size:"",cont_size:"",def_size:"",end_type:""},v=0;v<D.length;v++)for(var h in p)p.hasOwnProperty(h)&&(f=v,p[b=h]+=D[f][b]+":");p.fast_background="get_cached_urls",N(p,function(e){if(e){e=e.split(":");for(var a=0;a<D.length;a++)H(D[a].url,e[a],D[a].img_obj,D[a].fb_selector,D[a].fb_tmp_attr_p,D[a].cached_key)}else for(a=0;a<D.length;a++)q()},function(){for(var e=0;e<D.length;e++)!function(a,t,e,o,s,r,i,n,l){N({fast_background:"get_cached_url",web_url:t,cover_size:e,cont_size:o,def_size:s,end_type:r},function(e){H(t,e,a,i,n,l)},z)}(D[e].img_obj,D[e].web_url,D[e].cover_size,D[e].cont_size,D[e].def_size,D[e].end_f_type,D[e].fb_selector,D[e].fb_tmp_attr_p,D[e].cached_key)},1e3)}}},Q=jQuery;E=Q.extend(fast_background,E);var T=null,w=!1,m=null,A=0,i=0,j=[],W={b_url:"background-image",img_src:"src"},F=[],L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII=",P=!0,o=Q(window).height(),J={data:{},get:function(e){return!this.data[e]&&T.isLocalStorageSupported&&(this.data[e]=localStorage.getItem(e)),this.data[e]},set:function(e,a){this.data[e]=a,T.isLocalStorageSupported&&E.use_local_storage&&localStorage.setItem(e,a)},del:function(e){this.data[e]&&(delete this.data[e],T.isLocalStorageSupported&&localStorage.removeItem(e))}},y=!1,U={jpg:2,png:3,webp:18};Q(function(){Q(window).on("beforeunload.fast_background",function(e){w=!0});var a=Q(window).width();Q(window).resize(function(){if(!E.resize_event)return!0;var e=Q(window).width();E.stage_loaded<2||T.isMobile.any&&a===e||-1===window.location.host.indexOf("yandex.net")&&(Q(".fb_loaded").removeClass("fb_loaded"),a=Q(window).width(),E.update())}),Q(document).on("scroll mousemove touchstart",function(e){P&&0<E.stage_loaded&&(P=!1,E.is_debug_pws&&console.warn("load_only_visible set false"),fast_background.update())})});var d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,a){window.setTimeout(e,1e3/60)},q=null,n=[],l=null,S={get_all:function(e){var a=e.attr("data-urls");return void 0===a?{}:(a=a.replace(/'/gi,'"'),a=Q.parseJSON(a))},get:function(e,a){return this.get_all(e)[a]},set_all:function(e,a){var t=Q.toJSON(a);t=t.replace(/\"/gi,"'"),e.attr("data-urls",t),isEmptyObject(a)&&this.del_all(e)},set:function(e,a,t){var o=this.get_all(e);o[a]=t,this.set_all(e,o)},del_all:function(e){e.removeAttr("data-urls")},del:function(e,a){var t=this.get_all(e);delete t[a],this.set_all(e,t)},all_exist:function(e){return void 0!==e.attr("data-urls")}},s={},x=!1,k="IntersectionObserver"in window?new IntersectionObserver(function(e){if(P)setTimeout(arguments.callee.bind(this,e),300);else for(var a in x=!0,e){var t=e[a];if(t.isIntersecting){var o=Q(t.target),s=o.data("fb_sel"),r=null;s&&g(s)&&(r=o.attr("data-url"))&&X(r)&&f(o,r);var i=o.data("fb_sels");if(i)for(s in i)if(g(s)){var n=s.split(/(?=[: ])/g),l=n[0];n[0]="";var _=n.join("");" "===_.substr(0,1)&&(_=_.substr(1));var d=o.closest(l);X(r=S.get(d,_))&&f(o,r,s)}}}},{rootMargin:"0px 1000px "+(o+o/2)+"px 1000px"}):null}function c(e){return!/(\/(m_)?def_)/.test(e)}function N(o,s,r,e){if(A>=E.max_ajax_post_stream||i)setTimeout(arguments.callee.bind(this,o,s,r,e),100);else{A++,E.is_debug_pws&&(console.log("ajax begin"),console.log("pws "+A));var a=o,t={url:E.ajax_url.replace(window.location.hash,""),method:"post",data:a,complete:function(e){var a=e.responseText;if(200===e.status){if(A--,E.is_debug_pws&&(console.log("ajax end"),console.log("pws "+A)),w)return;var t="<->ajax_complete<->";if(a.substring(a.length-t.length)!==t)return r?r(a):console.error("ERROR POST AJAX: "+a),void s(null);a=a.substring(0,a.length-t.length),s&&s(a)}else{if(A--,E.is_debug_pws&&(console.error("ajax fail"),console.log("pws "+A)),w)return;r?r("ERROR POST AJAX: <div style='white-space: pre-wrap; word-wrap:break-word;'>"+window.location.href+" "+(Q.toJSON?Q.toJSON(o):"")+"</div><br>ERROR TEXT: "+e.statusText):console.error("ERROR POST AJAX: "+e.statusText),s(null)}}};e&&(t.timeout=e),Q.ajax(t)}}function u(a,e,t,o){if(!o){if(!a)return void(t&&t(a));n.push([a,e,t])}if(n.length){var s=n[0];a=s[0],e=s[1],t=s[2],n.splice(0,1),n.length||(clearInterval(l),l=null),i++,E.is_debug_pws&&(console.warn("load_img "+a),console.log("ilws "+i));var r=new Image;r.onload=function(){i--,E.is_debug_pws&&(console.log("loaded_img "+a),console.log("ilws "+i)),e&&e(a)},r.onerror=function(e){return i--,E.is_debug_pws&&(console.log("img on error "+a),console.log("ilws "+i)),e.preventDefault(),e.stopPropagation(),t&&t(),!1},r.src=a,n.length&&arguments.callee.apply(this,null,null,null,!0)}}function V(e,a){var t=e.attr("id");(t&&(t="#"+t),t||(t=e.is("body")?"fb_body":"fb_"+Math.random().toString(36).substr(2,9),e.attr("id",t),t="#"+t),a)&&(t=t+(0===a.indexOf(":")?"":" ")+a);return t=E.prepare_selector_hook(t)}function X(e){return/\.(jpe?g|png|webp|gif|svg)($|:| !|\?)/i.test(e)}function $(e,t,a,o,s,r){if(E.is_debug_pws&&console.log("set_f-"+e),X(e)){c(e)&&(t.hasClass("fb_loaded")&&(t.removeClass("fb_loaded"),t.addClass("fb_dynamic_url")),t.hasClass("fb_dynamic_url")||s||r||t.addClass("fb_loaded"),t.data("fb_last_load_url",e));var i=t&&t.is("img")?W.img_src:W.b_url;try{switch(i){case W.b_url:var n=a;n?Q(n).css(i,""):(t[0].style[i]="",n=V(t)),void 0===E.cssobj.obj[n]&&(E.cssobj.obj[n]={});var l=!l&&-1!==F.indexOf(n),_="url("+e+")"+(l?" !important":"");E.cssobj.obj[n][i]&&E.cssobj.obj[n][i]!==_&&(!0,E.cssobj.obj[n][i]="none",E.cssobj.obj[n].backgroundImage="none",o||E.cssobj.update()),E.cssobj.obj[n][i]=_,E.cssobj.obj[n].backgroundImage=_,o||E.cssobj.update();break;case W.img_src:t.attr(i)!==e&&t.attr(i,e),d(function(){var e=Q(window).width(),a=t.width();(500<e&&e<a||T.isMobile.anyPhone&&a<10)&&t.css("width","100%")},t[0])}/*!ajax_work_not_minus &&*/t.hasClass("fb_ev_img_load")&&t.trigger("fb_ev_img_load",[e])}catch(e){console.warn(e.message)}}s||q()}function Y(e,a,t){var o=e.is("img")?W.img_src:W.b_url;switch(o){case W.b_url:var s="";if(t)s=e.css(o);else{var r=a;if(r||(r=V(e)),void 0===E.cssobj.obj[r])return"";s=E.cssobj.obj[r][o]}return s?s.replace(/url\(['"]?|['"]?\)/g,""):"";case W.img_src:var i=e.attr(o);return void 0===i&&(i=""),i}}function G(e,a,t,o){t||(t=e.width()),o||(o=e.height());t-=t%10,o-=o%10;var s="";try{var r=new Date;s=r.getDate()+r.getMonth()+r.getFullYear()}catch(e){}return"fast_background_cached_url_"+t+"x"+o+"_"+a+"_"+s}function K(e,a){if(P){var t=e[0].getBoundingClientRect();return t.top<o&&(t.top||t.height)||e.hasClass("fb_ignore_io")}return!k||s[a||V(e)]||e.hasClass("fb_ignore_io")}function H(e,a,t,o,s,r,i,n){function l(){J.del(r),t.removeClass("fb_loaded"),t.data("fb_before_error",!0),q()}if(a){if(c(a))a&&!i&&J.set(r,a);else{var _="tmp_width"+(o?"_c_"+s:""),d="tmp_height"+(o?"_c_"+s:"");t.removeData(_),t.removeData(d)}K(t,o)?(t.hasClass("fb_ev_img_cache_url")&&t.trigger("fb_ev_img_cache_url",[a]),t.data("fb_before_error")&&(a+="?is_retry=1"),u(a,function(){$(a,t,o,!1,n)},l)):n||q()}else l()}function g(e){return!s[e]&&(s[e]=!0)}function f(e,a,t){(a=a.replace(" !important",""))&&E.clear_urls_pattern&&(a=a.replace(E.clear_urls_pattern,"")),a=a.split(":")[0],a+=":"+e.data("fb_img_type");var o=G(e,a),s=J.get(o);!s||e.hasClass("fb_loaded")&&e.data("fb_last_load_url")===s?k&&k.unobserve(e[0]):(E.ajax_is_work++,e.data("fb_before_error")&&(s+="?is_retry=1"),u(s,function(){k&&k.unobserve(e[0]),$(s,e,t)},function(){e.removeClass("fb_loaded"),e.data("fb_before_error",!0),J.del(o),q()}))}}();